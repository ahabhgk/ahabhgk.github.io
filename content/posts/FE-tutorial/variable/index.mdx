---
title: Variable of JavaScript
slug: tutorial-of-variable-of-javascript
date: 2019-05-11
author: ahabhgk
description: æ•°å­—åª’ä½“å®éªŒå®¤å‰ç«¯è®²è¯¾ï¼Œå˜é‡å…¥é—¨
tags:
  - FE Tutorial
---

## æ•°æ®ç±»å‹

ECMAScript æ ‡å‡†è§„å®šäº† 7 ç§æ•°æ®ç±»å‹ï¼Œå…¶æŠŠè¿™7ç§æ•°æ®ç±»å‹åˆåˆ†ä¸ºä¸¤ç§ï¼š

åŸºç¡€ç±»å‹ï¼ˆåŸå§‹ç±»å‹ï¼‰ï¼š

`Null`

`Undefined`

`Boolean`ï¼šå¸ƒå°”

`Number`ï¼šåŒç²¾åº¦æµ®ç‚¹å‹ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šå€¼ï¼ˆ-Infinityã€+Infinityã€NaNï¼‰

`String`ï¼šå­—ç¬¦ä¸²

`Symbol`ï¼šä¸€ç§å®ä¾‹æ˜¯å”¯ä¸€ä¸”ä¸å¯æ”¹å˜çš„æ•°æ®ç±»å‹ï¼ˆes6ï¼‰

`BigInt`ï¼šä»»æ„ç²¾åº¦çš„å¤§æ•´æ•°ï¼ˆes10ï¼‰

![0-null-undefined.png](./img/0-null-undefined.png)

å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ç±»å‹ï¼‰ï¼š

`Object`ï¼šå¯¹è±¡

`Function`ï¼šå‡½æ•°

`Array`ï¼šæ•°ç»„

â€¦â€¦

### åŸºç¡€ç±»å‹ä¸å¼•ç”¨ç±»å‹åŒºåˆ«

**æ ˆï¼ˆstackï¼‰** å†…å­˜ï¼š

* å­˜å‚¨çš„å€¼å¤§å°å›ºå®š
* ç©ºé—´è¾ƒå°
* å¯ä»¥ç›´æ¥æ“ä½œå…¶ä¿å­˜çš„å˜é‡ï¼Œè¿è¡Œæ•ˆç‡é«˜
* ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å­˜å‚¨ç©ºé—´

**å †ï¼ˆheapï¼‰** å†…å­˜ï¼š

* å­˜å‚¨çš„å€¼å¤§å°ä¸å®šï¼Œå¯åŠ¨æ€è°ƒæ•´
* ç©ºé—´è¾ƒå¤§ï¼Œè¿è¡Œæ•ˆç‡ä½
* æ— æ³•ç›´æ¥æ“ä½œå…¶å†…éƒ¨å­˜å‚¨ï¼Œä½¿ç”¨å¼•ç”¨åœ°å€è¯»å–
* é€šè¿‡ä»£ç è¿›è¡Œåˆ†é…ç©ºé—´

### åŸºç¡€ç±»å‹ï¼š

åŸå§‹ç±»å‹çš„å€¼è¢«ç›´æ¥å­˜å‚¨åœ¨æ ˆä¸­ï¼Œåœ¨å˜é‡å®šä¹‰æ—¶ï¼Œæ ˆå°±ä¸ºå…¶åˆ†é…å¥½äº†å†…å­˜ç©ºé—´

![primitive-values.png](./img/primitive-values.png)

ç”±äºæ ˆä¸­çš„å†…å­˜ç©ºé—´çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆæ³¨å®šäº†å­˜å‚¨åœ¨æ ˆä¸­çš„å˜é‡å°±æ˜¯ä¸å¯å˜çš„

```js
var str = 'ahabhgk';
var slicedStr = str.slice(1)

console.log(str) // ahabhgk
console.log(slicedStr) // habhgk
```

```js
str += '6'
console.log(str);  // ahabhgk6
```

![str.png](./img/str.png)

### å¼•ç”¨ç±»å‹ï¼š

å¼•ç”¨ç±»å‹çš„å€¼å®é™…å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå®ƒåœ¨æ ˆä¸­åªå­˜å‚¨äº†ä¸€ä¸ªå›ºå®šé•¿åº¦çš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘å †å†…å­˜ä¸­çš„å€¼ã€‚

```js
var obj = { name: 'ahabhgk' }
var fn = function () {}
var arr = [1, 2, 3]
```

![ref-values.png](./img/ref-values.png)

å¼•ç”¨ç±»å‹å°±ä¸å†å…·æœ‰ä¸å¯å˜æ€§äº†ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“çš„æ”¹å˜å®ƒä»¬ï¼š

```js
obj.name = "baha"
arr.splice(1, 1)

console.log(obj) // { name: 'baha' }
console.log(arr) // [1, 3]
```

<details>
<summary>
console.log è¾“å‡ºä»€ä¹ˆï¼Ÿ

```js
var obj = { a: 'foo', b: 'bar' }
var copy = obj
copy.a = 'wala'
console.log(obj.a)
```

</summary>
'wala'
</details>

<details>
<summary>
console.log è¾“å‡ºä»€ä¹ˆï¼Ÿ

```js
var obj1 = { a: 'foo', b: 'bar' }
var obj2 = { a: 'foo', b: 'bar' }
console.log(obj1 === obj2)
```

</summary>
false
</details>

### åŒ…è£…ç±»å‹

ä¸ºäº†ä¾¿äºæ“ä½œåŸºæœ¬ç±»å‹å€¼ï¼ŒECMAScriptè¿˜æä¾›äº†å‡ ä¸ªç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ï¼Œä»–ä»¬æ˜¯åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»å‹ï¼š

* Boolean
* Number
* String

> å¼•ç”¨ç±»å‹å’ŒåŒ…è£…ç±»å‹çš„ä¸»è¦åŒºåˆ«å°±æ˜¯å¯¹è±¡çš„ç”Ÿå­˜æœŸï¼Œä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºçš„å¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼Œåœ¨æ‰§è¡Œæµç¦»å¼€å½“å‰ä½œç”¨åŸŸä¹‹å‰éƒ½ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œè‡ªåŸºæœ¬ç±»å‹åˆ™åªå­˜åœ¨äºä¸€è¡Œä»£ç çš„æ‰§è¡Œç¬é—´ï¼Œç„¶åç«‹å³è¢«é”€æ¯ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åœ¨è¿è¡Œæ—¶ä¸ºåŸºæœ¬ç±»å‹æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚

#### è£…ç®±å’Œæ‹†ç®±

è£…ç®±è½¬æ¢ï¼šæŠŠåŸºæœ¬ç±»å‹è½¬æ¢ä¸ºå¯¹åº”çš„åŒ…è£…ç±»å‹

æ‹†ç®±æ“ä½œï¼šæŠŠå¼•ç”¨ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹

æ—¢ç„¶åŸå§‹ç±»å‹ä¸èƒ½æ‰©å±•å±æ€§å’Œæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦‚ä½•ä½¿ç”¨åŸå§‹ç±»å‹è°ƒç”¨æ–¹æ³•çš„å‘¢ï¼Ÿ

è£…ç®±ï¼š

```js
var str = 'ahabhgk';
var slicedStr = str.slice(1)
```

å®é™…ä¸Šå‘ç”Ÿäº†ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š

1. åˆ›å»ºä¸€ä¸ª String çš„åŒ…è£…ç±»å‹å®ä¾‹
2. åœ¨å®ä¾‹ä¸Šè°ƒç”¨ slice æ–¹æ³•
3. é”€æ¯å®ä¾‹

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸºæœ¬ç±»å‹è°ƒç”¨æ–¹æ³•ï¼Œå°±ä¼šè‡ªåŠ¨è¿›è¡Œè£…ç®±å’Œæ‹†ç®±æ“ä½œï¼Œç›¸åŒçš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ Number å’Œ Boolean ç±»å‹æ—¶ï¼Œä¹Ÿä¼šå‘ç”Ÿè¿™ä¸ªè¿‡ç¨‹ã€‚

æ‹†ç®±ï¼š

ä»å¼•ç”¨ç±»å‹åˆ°åŸºæœ¬ç±»å‹çš„è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯æ‹†ç®±çš„è¿‡ç¨‹ä¸­ï¼Œä¼šéµå¾ª ECMAScript è§„èŒƒè§„å®šçš„ toPrimitive åŸåˆ™ï¼Œä¸€èˆ¬ä¼šè°ƒç”¨å¼•ç”¨ç±»å‹çš„ valueOf å’Œ toString æ–¹æ³•ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥é‡å†™ toPeimitive æ–¹æ³•ã€‚ä¸€èˆ¬è½¬æ¢æˆä¸åŒç±»å‹çš„å€¼éµå¾ªçš„åŸåˆ™ä¸åŒï¼Œä¾‹å¦‚ï¼š

* å¼•ç”¨ç±»å‹è½¬æ¢ä¸º Number ç±»å‹ï¼Œå…ˆè°ƒç”¨ valueOfï¼Œå†è°ƒç”¨ toString
* å¼•ç”¨ç±»å‹è½¬æ¢ä¸º String ç±»å‹ï¼Œå…ˆè°ƒç”¨ toStringï¼Œå†è°ƒç”¨ valueOf

è‹¥valueOfå’ŒtoStringéƒ½ä¸å­˜åœ¨ï¼Œæˆ–è€…æ²¡æœ‰è¿”å›åŸºæœ¬ç±»å‹ï¼Œåˆ™æŠ›å‡ºTypeErrorå¼‚å¸¸ã€‚

```js
const basketball = {
  [Symbol.toPrimitive]() { // toString
    return 'ğŸ€'
  },
}
console.log(basketball == 'ğŸ€')
console.log(basketball === 'ğŸ€')
console.log('ä½ æ‰“' + basketball + 'â€¦â€¦')
```

<details>
<summary>
ä¸€é“ç»å…¸çš„é¢è¯•é¢˜ï¼Œå¦‚ä½•è®©ï¼ša == 1 && a == 2 && a == 3 è¿”å› trueã€‚
</summary>
æ ¹æ®ä¸Šé¢çš„æ‹†ç®±è½¬æ¢ï¼›åŒæ—¶ä½¿ç”¨ == æ—¶ï¼Œè‹¥ä¸¤ä¾§ç±»å‹ç›¸åŒï¼Œåˆ™æ¯”è¾ƒç»“æœå’Œ === ç›¸åŒï¼Œå¦åˆ™ä¼šå‘ç”Ÿéšå¼è½¬æ¢ï¼Œæ‰€ä»¥ï¼š

```js
const a = {
  value: [3, 2, 1],
  valueOf() {
    return this.value.pop()
  },
}
```

</details>

## å˜é‡å£°æ˜

```js
var a = 1
let b = 'hah'
const obj = {}
const foo = (...args) => {
  //
}
function bar() {
  //
}
class Person {
  //
}
import img from './img.png'
```

### å˜é‡æå‡

```js
var a = function () {} // ä»¥å˜é‡å½¢å¼å®šä¹‰å‡½æ•°
a()
var b = 1
```

ç­‰åŒäºï¼š

```js
var a, b // undefined, undefined
a = function () {}
a()
b = 1 // 1
```

<details>
<summary>
ä¸¤ä¸ª console.log åˆ†åˆ«è¾“å‡ºä»€ä¹ˆï¼Ÿ

```js
console.log(a)
var a = 1
console.log(a)
```

</summary>
undefined

1
</details>

### å‡½æ•°æå‡

```js
foo()
function foo() {}
```

ç­‰åŒäºï¼š

```js
function foo() {}
foo()
```

<details>
<summary>
è¿è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ

```js
bar()
var bar = () => console.log('foo')
```

</summary>
æŠ¥é”™ // Uncaught TypeError: bar is not a function
</details>

### æš‚æ—¶æ€§æ­»åŒºï¼ˆes6ï¼‰

JavaScript å¼•æ“åœ¨æ‰«æä»£ç å‘ç°å˜é‡å£°æ˜æ—¶ï¼Œè¦ä¹ˆå°†å®ƒä»¬æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼ˆé‡åˆ° var å£°æ˜ï¼‰ï¼Œè¦ä¹ˆå°†å£°æ˜æ”¾åœ¨ TDZ ä¸­ï¼ˆé‡åˆ° let å’Œ const å£°æ˜ï¼‰ã€‚è®¿é—® TDZ ä¸­çš„å˜é‡ä¼šè§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚åªæœ‰æ‰§è¡Œè¿‡å˜é‡å£°æ˜è¯­å¥åï¼Œå˜é‡æ‰ä¼šä» TDZ ä¸­ç§»å‡ºï¼Œç„¶åæ–¹å¯è®¿é—®ã€‚

```js
console.log(a, b) // Uncaught ReferenceError
const a = 1
let b = 2
```

#### const æœ¬è´¨

> constå®é™…ä¸Šä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨ã€‚å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚ä½†å¯¹äºå¤åˆç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆï¼Œconståªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼ˆå³æ€»æ˜¯æŒ‡å‘å¦ä¸€ä¸ªå›ºå®šçš„åœ°å€ï¼‰ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†

æœ‰å…´è¶£çš„å¯ä»¥é˜…è¯»[ Airbnb æœ‰å…³å˜é‡å£°æ˜çš„è§„èŒƒ](https://github.com/airbnb/javascript#variables)ï¼Œä¹Ÿå¯ä»¥ç”¨ airbnb è§„èŒƒé…ç½®çš„ eslint è¯•ç€å†™å†™ä»£ç ï¼Œçœ‹ç°åœ¨å˜é‡é€šå¸¸æ˜¯æ€æ ·å£°æ˜çš„ã€‚

### å‡½æ•°ä¼ å‚

ECMAScript ä¸­æ‰€æœ‰çš„å‡½æ•°çš„å‚æ•°éƒ½æ˜¯**å€¼ä¼ é€’**

```js
var a = 1
function setAddNum(num) { // var num = a
  var base = 0
  return function add() {
    base += num
    return base
  }
}
var add = setAddNum(a)
var sum1 = add()
console.log(sum1) // 1
```

<details>
<summary>
console.log è¾“å‡ºä»€ä¹ˆï¼Ÿ

```js
const o = {}
function changeValue(obj) { // var obj = o
  obj.name = 'ahabhgk'
  obj = { name: 'haha' }
}
changeValue(o)
console.log(o.name)
```

</summary>
'ahabhgk'
</details>

## ç±»å‹åˆ¤æ–­

### typeof

```js
typeof 'ahabhgk' // string
typeof 123 // number
typeof true // boolean
typeof Symbol() // symbol
typeof undefined // undefined
typeof () => {} // function

typeof null // object
typeof [] // object
typeof {} // object
typeof new Date() // object
typeof /^\d*$/ // object
```

é™¤å‡½æ•°å¤–æ‰€æœ‰çš„å¼•ç”¨ç±»å‹éƒ½ä¼šè¢«åˆ¤å®šä¸º object

åŸºæœ¬ç±»å‹ä¸­ null ä¼šåˆ¤å®šä¸º objectï¼Œè¿™æ˜¯åœ¨JavaScriptåˆç‰ˆå°±æµä¼ ä¸‹æ¥çš„bugï¼Œåé¢ç”±äºä¿®æ”¹ä¼šé€ æˆå¤§é‡çš„å…¼å®¹é—®é¢˜å°±ä¸€ç›´æ²¡æœ‰è¢«ä¿®å¤

### instance of

æ ¹æ®åŸå‹é“¾æŸ¥æ‰¾

```js
[] instanceof Array // true
new Date() instanceof Date // true
new RegExp() instanceof RegExp // true

[] instanceof Object // true
function () {}  instanceof Object // true
```

### Object.prototype.toString

```js
const isType = function (type) {
  return function (instance) {
    return Object.prototype.toString.call(instance) === `[object ${type}]`
  }
}

const isArray = isType('Array')

isArray([]) // true
isArray({}) // false
```

## ä½œç”¨åŸŸ

* å…¨å±€ä½œç”¨åŸŸï¼ˆå°½é‡é¿å…æ±¡æŸ“ :poop:å…¨å±€ä½œç”¨åŸŸï¼‰
* å‡½æ•°ä½œç”¨åŸŸ
* å—çº§ä½œç”¨åŸŸï¼ˆes6ï¼‰

```js
for (var i = 0; i < 5; i++) {
  setTimeout(function () {
    console.log(i)
  }, 0)
}
// 5 ä¸ª 5
```

```js
// ä¼ªä»£ç 
var i

i = 0
setTimeout(function () {
  console.log(i)
}, 0)

i++
setTimeout(function () {
  console.log(i)
}, 0)

i++
setTimeout(function () {
  console.log(i)
}, 0)

i++
setTimeout(function () {
  console.log(i)
}, 0)

i++
setTimeout(function () {
  console.log(i)
}, 0)

i++
```

è§£å†³æ–¹æ³•ï¼š

1. å‡½æ•°çš„å€¼ä¼ é€’

```js
for (var i = 0; i < 5; i++) {
  (function (i) {
    setTimeout(function () {
      console.log(i)
    }, 0)
  })(i)
}
```

ä»”ç»†çœ‹ setTimeout çš„ API æ–‡æ¡£ï¼Œæ”¹è¿›ï¼š

```js
for (var i = 0; i < 5; i++) {
  setTimeout(function (j) {
    console.log(j)
  }, 0, i)
}
```

2. ä½¿ç”¨å—çº§ä½œç”¨åŸŸï¼ˆes6ï¼‰

```js
for (let i = 0; i < 5; i++) {
  setTimeout(function () {
    console.log(i)
  }, 0)
}
```

```js
// ä¼ªä»£ç 
{
  let i = 0
  setTimeout(function () {
    console.log(i)
  }, 0)
}

{
  let i = 1
  setTimeout(function () {
    console.log(i)
  }, 0)
}

{
  let i = 2
  setTimeout(function () {
    console.log(i)
  }, 0)
}

{
  let i = 3
  setTimeout(function () {
    console.log(i)
  }, 0)
}

{
  let i = 4
  setTimeout(function () {
    console.log(i)
  }, 0)
}

{
  let i = 5
}
```

## END

åªæ˜¯æ‘˜å‡ºæ¥ä¸€éƒ¨åˆ†ï¼ˆå¦‚æœä»£ç å†™çš„è§„èŒƒçš„è¯ï¼Œå¾ˆå¤šéƒ¨åˆ†éƒ½é‡ä¸åˆ°ï¼‰ï¼Œæ›´å…·ä½“çš„çœ‹è¿™ç¯‡ï¼š[ä½ çœŸçš„æŒæ¡å˜é‡å’Œç±»å‹äº†å—ï¼Ÿ](https://juejin.im/post/5cec1bcff265da1b8f1aa08f)

Think:

1. å­¦ä¹ é—­åŒ…
    è™½ç„¶å¯èƒ½å¾ˆé•¿æ—¶é—´éƒ½ä¸ä¼šç”¨åˆ°ï¼Œä½†é—­åŒ…åœ¨ JavaScript æ˜¯å¾ˆé‡è¦çš„ï¼Œé—­åŒ…å­¦å¾—å¥½ä¸ä»…å¯ä»¥ä¸ºä»¥åå‡½æ•°å¼ç¼–ç¨‹ã€å­¦ä¹ æ¡†æ¶ç­‰æ‰“ä¸‹åŸºç¡€ï¼Œè¿˜å¯ä»¥é€šè¿‡é—­åŒ…ç†è§£å¾ˆå¤šä¸œè¥¿ï¼š
    * é™æ€ï¼ˆè¯æ³•ï¼‰ä½œç”¨åŸŸä¸åŠ¨æ€ä½œç”¨åŸŸ
    * ä½œç”¨åŸŸé“¾
    * æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ
    â€¦â€¦

2. 
    <details>
    <summary>
    å†™ä¸€ä¸ª val å‡½æ•°ï¼Œå®ç°ï¼š

    ```js
    function val(value) {
      //
    }

    const one = val(1)
    const three = one.plus(2)
    const six = three.plus(3)

    console.log(one.value) // 1
    console.log(three.value) // 3
    console.log(six.value) // 6
    ```

    </summary>

    ```js
    function val(value) {
      function plus(num) {
        value += num
        return { plus, value }
      }
      return { plus, value }
    }
    ```

    </details>

3. 
    <details>
    <summary>
    å†™ä¸€ä¸ª add å‡½æ•°ï¼Œå®ç°ï¼š

    ```js
    const add = function (a) {
      //
    }

    add(1) // 1
    add(1)(2)  // 3
    add(1)(2)(3) // 6
    add(1)(2)(3)(4) // 10
    ```

    æç¤ºï¼šé‡å†™ toString æ–¹æ³•

    </summary>

    ```js
    const add = function (value) {
      function sum(num) {
        value += num
        return sum
      }
      sum.toString = function () {
        return value
      }
      return sum
    }
    ```

    </details>

æ¨èï¼š

* [JavaScript é«˜çº§ç¨‹åºè®¾è®¡](https://book.douban.com/subject/10546125/)
* [ä½ ä¸çŸ¥é“çš„ JavaScript](https://github.com/getify/You-Dont-Know-JS)
* [å†´ç¾½çš„åšå®¢](https://github.com/mqyqingfeng/Blog)
* [é˜®ä¸€å³° es6](http://es6.ruanyifeng.com/)
