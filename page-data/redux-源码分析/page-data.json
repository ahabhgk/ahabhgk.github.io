{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/redux-源码分析","result":{"data":{"post":{"__typename":"MdxPost","slug":"/redux-源码分析","title":"Redux 源码分析","date":"07.12.2019","tags":[{"name":"SourceCode","slug":"source-code"}],"description":"深入 Redux 源码","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Redux 源码分析\",\n  \"date\": \"2019-12-07T00:00:00.000Z\",\n  \"author\": \"ahabhgk\",\n  \"description\": \"深入 Redux 源码\",\n  \"tags\": [\"SourceCode\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u968F\\u7740\\u524D\\u7AEF\\u5E94\\u7528\\u9010\\u6E10\\u53D8\\u5927\\uFF0C\\u72B6\\u6001\\u4E5F\\u8D8A\\u6765\\u8D8A\\u590D\\u6742\\uFF0C\\u9700\\u8981\\u4E00\\u79CD\\u72B6\\u6001\\u7BA1\\u7406\\u7684\\u65B9\\u6848\\uFF0CRedux \\u5C31\\u662F\\u5176\\u4E2D\\u4E00\\u79CD\"), mdx(\"p\", null, \"\\u603B\\u7ED3\\u8D77\\u6765 React \\u72B6\\u6001\\u7BA1\\u7406\\u65B9\\u6848\\u5C31\\u5206\\u4E3A\\u4E24\\u7C7B\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5916\\u90E8 Model\\uFF0C\\u901A\\u8FC7\\u4E8B\\u4EF6\\u4FEE\\u6539\\u72B6\\u6001\\uFF0C\\u7EC4\\u4EF6\\u901A\\u8FC7\\u76D1\\u542C\\u8BA2\\u9605\\u72B6\\u6001\\uFF08\\u901A\\u8FC7 Context \\u8FDE\\u63A5 React\\uFF09\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Redux\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Mobx\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"EventBus\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"hox\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u901A\\u8FC7 React Context \\u63D0\\u5347\\u72B6\\u6001\\uFF08\\u5305\\u62EC\\u4FEE\\u6539\\u72B6\\u6001\\u7684\\u65B9\\u6CD5\\uFF09\\uFF0C\\u5728\\u7EC4\\u4EF6\\u4E2D\\u62FF\\u5230\\u5E76\\u4F7F\\u7528 Context\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"unstated\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"unstated-next\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"reunx\"))))), mdx(\"p\", null, \"\\u4F7F\\u7528\\u5916\\u90E8 Model \\u7684\\u6A21\\u5F0F\\u7531\\u4E8E\\u4E0D\\u4F9D\\u8D56\\u4E8E React\\uFF0C\\u6240\\u4EE5\\u4E0D\\u4EC5\\u9002\\u7528\\u4E8E React\\uFF0C\\u5728\\u5404\\u4E2A\\u6846\\u67B6\\u751A\\u81F3\\u539F\\u751F\\u5E94\\u7528\\u4E2D\\u90FD\\u53EF\\u4EE5\\u4F7F\\u7528\\uFF1B\\u800C\\u7B2C\\u4E8C\\u79CD\\u4F9D\\u8D56\\u4E8E React Context \\u4EC5\\u9002\\u7528\\u4E8E React \\u5E94\\u7528\\uFF0C\\u4F46\\u662F\\u5341\\u5206\\u8F7B\\u91CF\"), mdx(\"p\", null, \"MVC\\uFF08backbone.js...\\uFF09\\u7531\\u4E8E\\u5F53\\u5E94\\u7528\\u53D8\\u5F97\\u5F88\\u5927\\u65F6\\uFF0C\\u4F1A\\u6709\\u591A\\u4E2A View \\u548C\\u591A\\u4E2A Model\\uFF0C\\uFF08\\u53CC\\u5411\\u7684\\uFF09\\u6570\\u636E\\u6D41\\u5C31\\u4F1A\\u53D8\\u7684\\u975E\\u5E38\\u6DF7\\u4E71\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"59.583333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABUElEQVQoz42TiaqDQAxF/f+/E6S2UgVtXVrr0sWKuKScQErh4cOBEJ2Z3NybZBxZWcuyqLG6rpO6rqVtW7ler+qxsizlfr9LVVXyer30rrMG9uufz+cXKEkSOZ1OcrvdFJBkAHKmgMZkzVgEBEEgl8tFiqKQMAwljmP1JMjzXO8Mw/CXoYHYer/f0jSNsknTVIOjKFKJAJKARDB+PB7izPMs4zjKNE1qLDzAXLA6AUYdAT8ej2p93+u+ScYcgqgPRjAMzufzlw31gg3fsMEjd7/f6xneYmHpcJmsloEic8CeBSPbpBGcZZnue54nh8NBGcIer00xucg3yXzTXTKjAtYEAExiFOx2O20WBDCVvKUpNiIm23VdTQBTGMMchhDYNDYAIg1Agn3f13HBkP7v2KwNNkBIYlRoBv/Itpp/B3vL06Nxv0+PhsEIZtT39+l9ACWZlf5832zfAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"MVC-bad\",\n    \"title\": \"MVC-bad\",\n    \"src\": \"/static/ba26e43f5475d375e6a120ece62ccb81/7d769/MVC-bad.png\",\n    \"srcSet\": [\"/static/ba26e43f5475d375e6a120ece62ccb81/5243c/MVC-bad.png 240w\", \"/static/ba26e43f5475d375e6a120ece62ccb81/ab158/MVC-bad.png 480w\", \"/static/ba26e43f5475d375e6a120ece62ccb81/7d769/MVC-bad.png 960w\", \"/static/ba26e43f5475d375e6a120ece62ccb81/87339/MVC-bad.png 1440w\", \"/static/ba26e43f5475d375e6a120ece62ccb81/2accf/MVC-bad.png 1454w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"\\u6240\\u4EE5\\u51FA\\u73B0\\u4E86 Flux\\uFF0C\\u4EE5\\u5355\\u5411\\u6570\\u636E\\u6D41\\u7BA1\\u7406\\u72B6\\u6001\\uFF0CReact \\u63A8\\u5D07\\u7684\\u6838\\u5FC3\\u4E5F\\u662F\\u5355\\u5411\\u6570\\u636E\\u6D41\\uFF0CFlux \\u4E2D\\u5355\\u5411\\u6570\\u636E\\u6D41\\u53EF\\u4EE5\\u770B\\u4F5C\\u662F\\u5728\\u5176\\u6574\\u4F53\\u67B6\\u6784\\u4E0A\\u7684\\u5EF6\\u4F38\\uFF0CRedux \\u662F\\u4E5F\\u4E0D\\u662F Flux\\uFF0C\\u5B83\\u9075\\u5FAA\\u4E86 Flux \\u7684\\u5355\\u5411\\u6570\\u636E\\u6D41\\u7684\\u7406\\u5FF5\\uFF0C\\u540C\\u65F6\\u7B80\\u5316\\u4E86 Flux\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"949px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"55.833333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHYVkgQxf/EABkQAQEBAAMAAAAAAAAAAAAAAAECERIhIv/aAAgBAQABBQJr031Ds8TaCiQk/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BJ//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ASf/xAAZEAACAwEAAAAAAAAAAAAAAAAAEQEhMUL/2gAIAQEABj8CTgnk1jLKP//EABsQAQADAQADAAAAAAAAAAAAAAEAESExQVFx/9oACAEBAAE/IUO3fNm2mGhfMAkHskXuN+ysCyUgUT//2gAMAwEAAgADAAAAEGgv/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/EAjs/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhMf/aAAgBAgEBPxCHR6f/xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAxIYGxQf/aAAgBAQABPxBICUCOmKutp4uscoaol+7yxvMbWbTgZU8zecLKvuf/2Q==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"different\",\n    \"title\": \"different\",\n    \"src\": \"/static/6cbb5b3b514b72dbf5430aaa94531c1a/353b5/different.jpg\",\n    \"srcSet\": [\"/static/6cbb5b3b514b72dbf5430aaa94531c1a/46946/different.jpg 240w\", \"/static/6cbb5b3b514b72dbf5430aaa94531c1a/55489/different.jpg 480w\", \"/static/6cbb5b3b514b72dbf5430aaa94531c1a/353b5/different.jpg 949w\"],\n    \"sizes\": \"(max-width: 949px) 100vw, 949px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Flux/Redux \\u8FD9\\u79CD\\u4EE5\\u5355\\u5411\\u6570\\u636E\\u6D41\\u7BA1\\u7406\\u72B6\\u6001\\u66F4\\u50CF\\u662F\\u4E00\\u79CD\\u8BBE\\u8BA1\\u6A21\\u5F0F\"), mdx(\"h2\", null, \"\\uD83D\\uDC40 Redux \\u5BF9\\u6BD4 Mobx\"), mdx(\"p\", null, \"Mobx \\u548C Redux \\u7684\\u76EE\\u6807\\u90FD\\u662F\\u7BA1\\u7406\\u597D\\u5E94\\u7528\\u72B6\\u6001\\uFF0C\\u4F46\\u662F\\u6700\\u6839\\u672C\\u7684\\u533A\\u522B\\u5728\\u4E8E\\u5BF9\\u6570\\u636E\\u7684\\u5904\\u7406\\u65B9\\u5F0F\\u4E0D\\u540C\\u3002\"), mdx(\"p\", null, \"Redux \\u8BA4\\u4E3A\\uFF0C\\u6570\\u636E\\u7684\\u4E00\\u81F4\\u6027\\u5F88\\u91CD\\u8981\\uFF0C\\u4E3A\\u4E86\\u4FDD\\u6301\\u6570\\u636E\\u7684\\u4E00\\u81F4\\u6027\\uFF0C\\u8981\\u6C42Store \\u4E2D\\u7684\\u6570\\u636E\\u5C3D\\u91CF\\u8303\\u5F0F\\u5316\\uFF0C\\u4E5F\\u5C31\\u662F\\u51CF\\u5C11\\u4E00\\u5207\\u4E0D\\u5FC5\\u8981\\u7684\\u5197\\u4F59\\uFF0C\\u4E3A\\u4E86\\u9650\\u5236\\u5BF9\\u6570\\u636E\\u7684\\u4FEE\\u6539\\uFF0C\\u8981\\u6C42 Store \\u4E2D\\u6570\\u636E\\u662F\\u4E0D\\u53EF\\u6539\\u7684\\uFF08Immutable\\uFF09\\uFF0C\\u53EA\\u80FD\\u901A\\u8FC7 action \\u89E6\\u53D1 reducer \\u6765\\u66F4\\u65B0 Store\\u3002\"), mdx(\"p\", null, \"Mobx \\u4E5F\\u8BA4\\u4E3A\\u6570\\u636E\\u7684\\u4E00\\u81F4\\u6027\\u5F88\\u91CD\\u8981\\uFF0C\\u4F46\\u662F\\u5B83\\u8BA4\\u4E3A\\u89E3\\u51B3\\u95EE\\u9898\\u7684\\u6839\\u672C\\u65B9\\u6CD5\\u4E0D\\u662F\\u8BA9\\u6570\\u636E\\u8303\\u5F0F\\u5316\\uFF0C\\u800C\\u662F\\u4E0D\\u8981\\u7ED9\\u673A\\u4F1A\\u8BA9\\u6570\\u636E\\u53D8\\u5F97\\u4E0D\\u4E00\\u81F4\\u3002\\u6240\\u4EE5\\uFF0CMobx \\u9F13\\u52B1\\u6570\\u636E\\u5E72\\u8106\\u5C31\\u201C\\u53CD\\u8303\\u5F0F\\u5316\\u201D\\uFF0C\\u6709\\u5197\\u4F59\\u6CA1\\u95EE\\u9898\\uFF0C\\u53EA\\u8981\\u6240\\u6709\\u6570\\u636E\\u4E4B\\u95F4\\u4FDD\\u6301\\u8054\\u52A8\\uFF0C\\u6539\\u4E86\\u4E00\\u5904\\uFF0C\\u5BF9\\u5E94\\u4F9D\\u8D56\\u8FD9\\u5904\\u7684\\u6570\\u636E\\u81EA\\u52A8\\u66F4\\u65B0\\uFF0C\\u90A3\\u5C31\\u4E0D\\u4F1A\\u53D1\\u751F\\u6570\\u636E\\u4E0D\\u4E00\\u81F4\\u7684\\u95EE\\u9898\\u3002\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Redux \\u548C Mobx \\u90FD\\u662F\\u4E00\\u4E2A\\u7279\\u5B9A\\u65F6\\u671F\\u7684\\u4EA7\\u7269\\uFF0C\\u4E0D\\u8981\\u56E0\\u4E3A\\u67D0\\u4E2A\\u5DE5\\u5177\\u6216\\u8005\\u6280\\u672F\\u70AB\\u9177\\u6216\\u8005\\u70ED\\u95E8\\u800C\\u53BB\\u7528\\u5B83\\uFF0C\\u8981\\u6839\\u636E\\u81EA\\u5DF1\\u7684\\u5DE5\\u4F5C\\u9700\\u8981\\u53BB\\u9009\\u62E9\\u5DE5\\u5177\\u548C\\u6280\\u672F\")), mdx(\"h2\", null, \"\\uD83D\\uDCDC Redux \\u4E09\\u5927\\u539F\\u5219\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5355\\u4E00\\u6570\\u636E\\u6E90\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u72B6\\u6001\\u662F\\u53EA\\u8BFB\\u7684\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u72B6\\u6001\\u4FEE\\u6539\\u5747\\u6709\\u7EAF\\u51FD\\u6570\\u5B8C\\u6210\"))), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"890px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"99.58333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrklEQVQ4y52Ua6uCQBCG/f//K7/YhwhCIi2ke2kX7X6bwzMwB4+5WGdhcHH13eedmV1Pasbr9Xp7dzwe5XQ6yf1+l8fjIa7hucQOh4OkaSrb7VbyPJc4jqXb7Yrv+zKbzWS32+naZrPROd9eLhe34Hq9VioLNsiyTObzuc55sslkMtENEd7v925BPmAURaECWL1er2oboul0KsPhUEajkSwWCxUlPASqYYTszs/szLzVakkYhrqGRUSTJJHVaqXB5p4ruefzWfr9/m8RECSHg8FASXjH2vP51CcBjBKSTASwQzDnJ+hsWAqahgryMRYMnflyufwjwjsoLM+ucFqGFHGzQoXrBKt961UXb7ebtgQJH4/HSmpFsIb+ShAKxKIokk6no21haaAATafKq1uEErJer6etgBCWEYaWvsMFxXsjLIvZAjTYhY5jRh9yzOgGaxdrGadgeQEBjlUQBNq4djrqLgWn5TIhJJAhZgOLH1W5KkhAQr6wjVXo2u22Nrvremu8vmhqkm65wjbiHwtWbVBV5uQTQipvR/FfhAhi0W5qiL8irOtF6OyeM8omwR+qYBZpWOx5SwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"redux-flow\",\n    \"title\": \"redux-flow\",\n    \"src\": \"/static/0d7919b48d430cf2b04769f0ed264dba/dcb99/redux-flow.png\",\n    \"srcSet\": [\"/static/0d7919b48d430cf2b04769f0ed264dba/5243c/redux-flow.png 240w\", \"/static/0d7919b48d430cf2b04769f0ed264dba/ab158/redux-flow.png 480w\", \"/static/0d7919b48d430cf2b04769f0ed264dba/dcb99/redux-flow.png 890w\"],\n    \"sizes\": \"(max-width: 890px) 100vw, 890px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"\\u76F8\\u6BD4 Flux \\u53EF\\u4EE5\\u770B\\u51FA\\uFF0CRedux \\u6CA1\\u6709 Dispatcher\\uFF0CStore \\u662F\\u5355\\u4E00\\u7684\\uFF0CStore \\u901A\\u8FC7 Reducers \\u7EAF\\u51FD\\u6570\\u83B7\\u53D6\\u65B0\\u7684 State\\uFF0C\\u4F7F\\u5F97\\u72B6\\u6001\\u7684\\u4FEE\\u6539\\u53D8\\u5F97\\u7B80\\u5355\\u3001\\u7EAF\\u7CB9\\u3001\\u53EF\\u6D4B\\u8BD5\\uFF0C\\u5E76\\u4E14\\u53EF\\u4EE5\\u8FFD\\u8E2A\\u6BCF\\u6B21\\u53D8\\u5316\\uFF0C\\u5B9E\\u73B0\\u4E86\\u65F6\\u95F4\\u65C5\\u884C\"), mdx(\"h2\", null, \"\\uD83D\\uDDDC middleware\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"It provides a third-party extension point between dispatching an action, and the moment it reaches the reducer.\")), mdx(\"p\", null, \"\\u5B83\\u63D0\\u4F9B\\u4E86\\u4E00\\u4E2A\\u5206\\u7C7B\\u5904\\u7406 action \\u7684\\u673A\\u4F1A\\u3002\\u5728 middleware \\u4E2D\\uFF0C\\u4F60\\u53EF\\u4EE5\\u68C0\\u9605\\u6BCF\\u4E00\\u4E2A\\u6D41\\u8FC7\\u7684 action\\uFF0C\\u6311\\u9009\\u51FA\\u7279\\u5B9A\\u7C7B\\u578B\\u7684 action \\u8FDB\\u884C\\u76F8\\u5E94\\u64CD\\u4F5C\\uFF0C\\u7ED9\\u4F60\\u4E00\\u6B21\\u6539\\u53D8 action \\u7684\\u673A\\u4F1A\"), mdx(\"h3\", null, \"3.1 Redux \\u4E3A\\u4EC0\\u4E48\\u9700\\u8981 middleware\"), mdx(\"p\", null, \"middleware \\u5927\\u90E8\\u5206\\u90FD\\u662F\\u7528\\u6765\\u5904\\u7406\\u5F02\\u6B65\\uFF0C\\u56E0\\u4E3A Redux \\u7684 reducer \\u5FC5\\u987B\\u8981\\u662F\\u4E00\\u4E2A\\u7EAF\\u51FD\\u6570\\uFF0C\\u4E0D\\u80FD\\u6709\\u4EFB\\u4F55\\u7684\\u526F\\u4F5C\\u7528\\uFF0C\\u6240\\u4EE5 Redux \\u5F15\\u5165\\u4E86 middleware\\uFF0C\\u5728 action \\u6CA1\\u6709\\u5230 reducer \\u7684\\u65F6\\u5019\\u5C31\\u62E6\\u622A action \\u5E76\\u8FDB\\u884C\\u526F\\u4F5C\\u7528\\u7684\\u64CD\\u4F5C\"), mdx(\"p\", null, \"\\u5982\\u679C reducer \\u4E0D\\u7EAF\\uFF08\\u6211\\u4EEC\\u5F53\\u7136\\u53EF\\u4EE5\\u5199\\u6210\\u4E0D\\u7EAF\\u7684\\uFF09\\uFF0C\\u5C31\\u53EF\\u4EE5\\u5728 reducer \\u4E2D\\u5904\\u7406\\u526F\\u4F5C\\u7528\\uFF0C\\u4F46\\u8FD9\\u6837\\u4E0D\\u4EC5\\u4EE3\\u7801\\u96BE\\u770B\\uFF08async reducer() => await ...\\uFF09\\uFF0C\\u800C\\u4E14\\u6CA1\\u6709\\u53EF\\u9884\\u6D4B\\u6027\\u3001\\u7EC4\\u7EC7\\u6027\\u2026\\u2026\"), mdx(\"p\", null, \"\\u4E5F\\u6B63\\u56E0\\u4E3A reducer \\u662F\\u7EAF\\u51FD\\u6570\\uFF0C\\u6211\\u4EEC\\u901A\\u8FC7 middleware \\u8FDB\\u884C\\u7684\\u5F02\\u6B65\\u64CD\\u4F5C\\u548C\\u5728\\u4E00\\u4E9B\\u5927\\u9879\\u76EE\\u4E2D\\u5BF9 action \\u7684\\u7279\\u6B8A\\u9700\\u6C42\\u7684\\u4E00\\u4E9B\\u5904\\u7406\\uFF0C\\u624D\\u53EF\\u4EE5\\u5F88\\u597D\\u7684\\u8FDB\\u884C\\u7EC4\\u7EC7\\u7BA1\\u7406\"), mdx(\"h2\", null, \"\\uD83D\\uDC26 \\u9AD8\\u9636 reducer\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"higher-order-reducer:: reducer => reducer\")), mdx(\"p\", null, \"\\u9AD8\\u9636 reducer \\u5C31\\u662F\\u6307\\u5C06 reducer \\u4F5C\\u4E3A\\u53C2\\u6570\\u6216\\u8005\\u8FD4\\u56DE\\u503C\\u7684\\u51FD\\u6570\"), mdx(\"p\", null, \"combineReducers \\u5176\\u5B9E\\u5C31\\u662F\\u4E00\\u4E2A\\u9AD8\\u9636 reducer\\uFF0C\\u56E0\\u4E3A combineReducers \\u5C31\\u662F\\u5C06\\u4E00\\u4E2A reducer \\u5BF9\\u8C61\\u4F5C\\u4E3A\\u53C2\\u6570\\uFF0C\\u6700\\u540E\\u8FD4\\u56DE\\u9876\\u5C42\\u7684 reducer\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"reducer \\u7684\\u590D\\u7528\\uFF1A\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6211\\u4EEC\\u4E24\\u4E2A\\u7EC4\\u4EF6\\uFF0C\\u5B83\\u4EEC\\u7684\\u529F\\u80FD\\u662F\\u76F8\\u540C\\u7684\\uFF0C\\u90FD\\u662F LOAD_DATA\\uFF0C\\u6211\\u4EEC\\u80FD\\u4E0D\\u80FD\\u8BA9\\u5B83\\u4EEC\\u5171\\u7528\\u4E00\\u4E2A reducer\\uFF1F\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u4E0D\\u80FD\\uFF0C\\u56E0\\u4E3A\\u5F53\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u51FA\\u53D1 action \\u65F6\\uFF0C\\u53E6\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u7684\\u72B6\\u6001\\u4E5F\\u4F1A\\u6539\\u53D8\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6240\\u4EE5\\u5728\\u4E00\\u4E2A\\u5E94\\u7528\\u4E2D\\uFF0C\\u4E0D\\u540C\\u6A21\\u5757\\u95F4\\u7684 actionType \\u5FC5\\u987B\\u662F\\u5168\\u5C40\\u552F\\u4E00\\u7684\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  \\u6211\\u4EEC\\u53EF\\u4EE5\\u7528\\u589E\\u52A0\\u524D\\u7F00\\u7684\\u65B9\\u6CD5\\u89E3\\u51B3\\uFF1A\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const generateReducer = (prefix, state) => {\\n  const LOAD_DATA = prefix + 'LOAD_DATA'\\n  const defaultStaet = {}\\n\\n  return (state = defaultStaet, action) => {\\n    switch (action.type) {\\n      case LOAD_DATA:\\n        return {\\n          ...state,\\n          data: action.payload,\\n        }\\n      default:\\n        return state\\n    }\\n  }\\n}\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"reducer \\u589E\\u5F3A\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  redux-undo\\uFF1A\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const undoable = reducer => {\\n  const defaultState = {\\n    past: [],\\n    current: reducer(undefined, {}),\\n    future: [],\\n  }\\n\\n  return (state = defaultState, action) => {\\n    const { past, current, future } = state\\n\\n    switch (action.type) {\\n      case '@@redux-undo/UNDO':\\n        const previous = past[past.length - 1]\\n        const newPast = past.slice(0, past.length - 1)\\n\\n        return {\\n          past: newPast,\\n          current: previous,\\n          future: [current, ...future],\\n        }\\n      case '@@redux-undo/REDO':\\n        const next = future[0]\\n        const newFuture = future.slice(1)\\n\\n        return {\\n          past: [...past, current],\\n          current: next,\\n          future: newFuture,\\n        }\\n      default:\\n        const newCurrent = reducer(current, action)\\n\\n        return {\\n          past: [...past, current],\\n          current: newCurrent,\\n          future: [],\\n        }\\n    }\\n  }\\n}\\n\")))), mdx(\"h2\", null, \"\\uD83D\\uDCDD \\u6E90\\u7801\\u5206\\u6790\"), mdx(\"h3\", null, \"5.1 createStore\"), mdx(\"p\", null, \"createStore \\u5176\\u5B9E\\u5C31\\u628A reducer \\u5305\\u4E86\\u4E00\\u5C42\\uFF0C\\u6839\\u672C\\u6CA1\\u6709 store\\uFF0C\\u53EA\\u662F\\u66B4\\u9732\\u51FA\\u51E0\\u4E2A\\u63A5\\u53E3\\uFF0C\\u65B9\\u4FBF\\u64CD\\u4F5C\\uFF0C\\u5E76\\u7528\\u53D1\\u5E03\\u8BA2\\u9605\\u6A21\\u5F0F\\u5B9E\\u73B0\\u4E86 state \\u6539\\u53D8\\u65F6\\u6267\\u884C\\u8BA2\\u9605\\u7684\\u51FD\\u6570\\u7684\\u529F\\u80FD\\uFF0C\\u7136\\u540E\\u5728\\u4E00\\u5F00\\u59CB\\u5B9E\\u73B0 enhancer\\uFF0C\\u4F9B applyMiddleware \\u4F7F\\u7528\"), mdx(\"p\", null, \"reducer\\u3001preloadedState/initialState \\u90FD\\u5F97\\u81EA\\u5DF1\\u5199\\uFF0CRedux \\u4E3A\\u6211\\u4EEC\\u5E72\\u7684\\u5F88\\u5C11\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const createStore = (reducer, preloadedState, enhancer) => {\\n  if (typeof enhancer !== undefined) {\\n    return enhancer(createStore)(reducer, preloadedState)\\n  }\\n\\n  let currentReducer = reducer\\n  let state = preloadedState\\n  let listeners = []\\n\\n  function getState() {\\n    return state\\n  }\\n\\n  function subscribe(listener) {\\n    // \\u5229\\u7528\\u95ED\\u5305\\u9632\\u6B62\\u591A\\u6B21 unsubscribe\\n    let isSubscribed = true\\n    listeners.push(listener)\\n\\n    return function unsubscribe() {\\n      if (!isSubscribe) return\\n\\n      const index = listeners.indexOf(lintener)\\n      listeners.splice(index, 1)\\n      isSubscribe = false\\n    }\\n  }\\n\\n  function dispatch(action) {\\n    state = currentReducer(state, action)\\n    // \\u4F9D\\u6B21\\u6267\\u884C\\u8BA2\\u9605\\n    listenters.forEach(listener => listener())\\n\\n    return action\\n  }\\n\\n  function replaceReducer(nextReducer) {\\n    currentReducer = nextReducer\\n\\n    dispatch({ type: Symbol('REPLACE') })\\n  }\\n\\n  // dispacth \\u4E00\\u4E2A\\u6CA1\\u6709\\u7684 action\\uFF0C\\u4EC5\\u7528\\u6765\\u7B2C\\u4E00\\u6B21\\u521D\\u59CB\\u5316 state\\n  dispatch({ type: Symbol('INIT') })\\n\\n  return {\\n    dispatch,\\n    subscribe,\\n    getState,\\n    replaceState,\\n  }\\n}\\n\")), mdx(\"h3\", null, \"5.2 combineReducers\"), mdx(\"p\", null, \"combineReducers \\u4F7F\\u6211\\u4EEC\\u66F4\\u65B9\\u4FBF\\u7684\\u7EC4\\u7EC7 state\\uFF0C\\u5B83\\u5E72\\u7684\\u5C31\\u662F\\u5C06\\u6240\\u6709\\u7684 reducers \\u6267\\u884C\\uFF0C\\u4F7F\\u76F8\\u5E94\\u7684 reducer \\u66F4\\u65B0\\u76F8\\u5E94\\u7684 state\\uFF0C\\u6700\\u7EC8\\u5F97\\u5230\\u603B\\u5171\\u7684\\u65B0\\u7684 state\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const combineReducers = reducers => (state, action) => (\\n  Object.entries(reducers).reducer((nextState, [key, reducer]) => {\\n    const previousStateForKey = state[key]\\n    const nextStateForKey = reducer(previousStateForKey, action)\\n\\n    return nextState[key] = nextStateForKey\\n  }, {})\\n)\\n\")), mdx(\"h3\", null, \"5.3 compose\"), mdx(\"p\", null, \"compose \\u5C31\\u662F\\u5178\\u578B\\u7684\\u51FD\\u6570\\u5F0F\\u7F16\\u7A0B\\u4E2D\\u7684\\u7EC4\\u5408\\u51FD\\u6570\\uFF0C\\u7528\\u4E8E\\u7EC4\\u5408\\u591A\\u4E2A enhancers \\u6210\\u4E00\\u4E2A enhancer\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const compose = (...fns) => fns.reduce((f, g) => (...args) => f(g(...args)))\\n\")), mdx(\"h3\", null, \"5.4 applyMiddleware\"), mdx(\"p\", null, \"applyMiddleware \\u53EF\\u4EE5\\u5BF9\\u7279\\u5B9A\\u7C7B\\u578B\\u7684 action \\u8FDB\\u884C\\u64CD\\u4F5C\"), mdx(\"p\", null, \"createStore \\u4E2D\\u7684 dispatch \\u7531\\u4E8E\\u6709\\u5BF9 action \\u662F\\u5426\\u4E3A plainObject \\u7684\\u68C0\\u6D4B\\uFF0C\\u6240\\u4EE5\\u53EA\\u80FD dispatch plainObject\\uFF0C\\u800C\\u4E2D\\u95F4\\u4EF6\\u53EF\\u4EE5\\u7A7F\\u5165\\u5176\\u4ED6\\u7C7B\\u578B\\u7684 action\\uFF08redux-thunk...\\uFF09\"), mdx(\"p\", null, \"\\u5B9E\\u73B0\\u5C31\\u662F\\u901A\\u8FC7\\u4F20\\u5165\\u65E7\\u7684 createStore \\u8FD4\\u56DE\\u589E\\u5F3A\\u8FC7\\u7684 store\\uFF0C\\u4ECE\\u65E7\\u7684 createStore \\u4E2D\\u63D0\\u53D6\\u51FA\\u539F\\u6765 dispatch\\uFF0C\\u7136\\u540E\\u5BF9\\u539F\\u6765\\u7684 dispatch \\u8FDB\\u884C\\u5305\\u88F9\\uFF08\\u589E\\u5F3A\\uFF09\\uFF0C\\u68C0\\u6D4B\\u7279\\u5B9A\\u7C7B\\u578B\\u7684 action \\u5E76\\u8FDB\\u884C\\u7684\\u4E00\\u4E9B\\u64CD\\u4F5C\\uFF0C\\u7136\\u540E\\u4ECD\\u7136\\u521B\\u5EFA\\u4E00\\u4E2A plainObject \\u7684 action\\uFF0C\\u4F7F\\u7528\\u539F\\u6765\\u7684 dispatch \\u6D3E\\u53D1\\u6389\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// \\u5BF9\\u5E94 enhancer(createStore)(reducer, preloadedState)\\nexport default function applyMiddleware(...middlewares) {\\n  return createStore => (...args) => {\\n    const store = createStore(...args)\\n    let dispatch = () => {\\n      throw new Error(\\n        'Dispatching while constructing your middleware is not allowed. ' +\\n          'Other middleware would not be applied to this dispatch.'\\n      )\\n    }\\n\\n    // \\u8FD9\\u91CC\\u4E00\\u5F00\\u59CB\\u4F20\\u5165\\u62A5\\u9519\\u7684 dispatch\\uFF0C\\u9632\\u6B62\\u5728\\u7EC4\\u5408 middlewares \\u65F6 dispatch\\n    // \\u4E4B\\u540E dispacth \\u6539\\u53D8\\uFF0C\\u6839\\u636E\\u4F5C\\u7528\\u57DF\\u5F97\\u5230\\u589E\\u5F3A\\u540E\\u7684 dispatch\\n    const middlewareAPI = {\\n      getState: store.getState,\\n      dispatch: (...args) => dispatch(...args)\\n    }\\n    const chain = middlewares.map(middleware => middleware(middlewareAPI))\\n    // \\u7EC4\\u5408\\u6240\\u6709 middleware\\uFF08enhancer\\uFF09\\uFF0C\\u628A\\u539F\\u6765\\u7684 dispatch \\u4F20\\u5165\\uFF0C\\u5F97\\u5230\\u5305\\u88F9\\uFF08\\u589E\\u5F3A\\uFF09\\u7684 dispatch\\n    // \\u628A\\u8FD9\\u884C compose \\u5206\\u5F00\\u5199\\u5C31\\u662F dispatch = thunk(logger(timer(store.dispatch)))\\n    dispatch = compose(...chain)(store.dispatch)\\n\\n    // \\u8FD4\\u56DE\\u65B0\\u7684 store\\n    return {\\n      ...store,\\n      dispatch\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"\\u7B80\\u5355\\u7684 middleware\\uFF0C\\u5728\\u6253\\u5370\\u65E5\\u5FD7\\u4E4B\\u524D\\u8F93\\u51FA\\u5F53\\u524D\\u7684\\u65F6\\u95F4\\u6233\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// \\u83B7\\u53D6 dispatch \\u548C getState \\u65B9\\u6CD5\\uFF0C\\u65B9\\u4FBF\\u5185\\u90E8\\u4F7F\\u7528\\uFF0C\\u8FD4\\u56DE\\u63A5\\u6536 dispatch \\u7684\\u51FD\\u6570\\n// \\u8FD9\\u91CC next \\u5C31\\u5BF9\\u5E94\\u4E86\\u4E0A\\u4E00\\u4E2A\\u4E2D\\u95F4\\u4EF6\\u8FD4\\u56DE\\u51FA\\u6765\\u7684 dispatch\\n// action \\u5C31\\u662F\\u4E4B\\u540E\\u5F00\\u53D1\\u8005\\u5199\\u7684\\u8981\\u6D3E\\u53D1\\u7684 action\\nconst timerMiddleware = ({ dispatch, getState }) => next => action => {\\n  console.log(`timer: ${new Date().getTime()}`)\\n  next(action)\\n}\\n\")), mdx(\"p\", null, \"\\u5BF9\\u5E94 redux-thunk \\u6E90\\u7801\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// \\u5176\\u5B9E thunk \\u5C31\\u662F ({ dispatch, getState }) => next => action => ... \\u8FD9\\u4E2A\\u51FD\\u6570\\n// \\u518D\\u5305\\u4E00\\u5C42\\u662F\\u4E3A\\u4E86\\u83B7\\u53D6\\u989D\\u5916\\u7684\\u53C2\\u6570\\uFF0C\\u4EE5\\u4F9B\\u4E00\\u4E9B\\u9700\\u6C42\\u4F7F\\u7528\\nfunction createThunkMiddleware(extraArgument) {\\n  return ({ dispatch, getState }) => next => action => {\\n    if (typeof action === 'function') {\\n      return action(dispatch, getState, extraArgument);\\n    }\\n\\n    // action \\u4E0D\\u662F function \\u5C31\\u7528\\u539F\\u6765\\u7684 dispatch \\u6D3E\\u53D1\\u6389\\n    return next(action);\\n  };\\n}\\n\\nconst thunk = createThunkMiddleware();\\nthunk.withExtraArgument = createThunkMiddleware;\\n\\nexport default thunk;\\n\")), mdx(\"h2\", null, \"ref\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6DF1\\u5165 react \\u6280\\u672F\\u6808\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://mp.weixin.qq.com/s?__biz=MzIxNjgwMDIzMA==&mid=2247484209&idx=1&sn=1a33a2c8cb58ae98e4f8080ab59da06f&chksm=9782cdb8a0f544ae4101a1a7453e8f5a320d9f338c92bf4a6ce6ae31c6228fd5887a091d7987&mpshare=1&scene=23&srcid=1024nQu5koC1MkPZfll5npNZ&sharer_sharetime=1571885623450&sharer_shareid=ff850364fdc08ae532955239c841ceda%23rd\"\n  }), \"\\u5B8C\\u5168\\u7406\\u89E3 redux\")))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"随着前端应用逐渐变大，状态也越来越复杂，需要一种状态管理的方案，Redux 就是其中一种 总结起来 React 状态管理方案就分为两类： 外部 Model，通过事件修改状态，组件通过监听订阅状态（通过 Context 连接 React） Redux Mobx EventBus…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/redux-源码分析","formatString":"DD.MM.YYYY"}}}