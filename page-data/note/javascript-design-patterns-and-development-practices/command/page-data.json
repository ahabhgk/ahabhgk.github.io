{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx","path":"/note/javascript-design-patterns-and-development-practices/command","result":{"data":{"page":{"__typename":"MdxPage","title":"命令模式","slug":"/note/javascript-design-patterns-and-development-practices/command","excerpt":"命令模式是最简单和优雅的模式之一，命令模式中的命令（command…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"命令模式\",\n  \"slug\": \"/note/javascript-design-patterns-and-development-practices/command\",\n  \"date\": \"2019-07-07T00:00:00.000Z\",\n  \"description\": \"《JavaScript 设计模式与开发实践》读书笔记\",\n  \"tags\": [\"Note\", \"JavaScript Design Patterns and Development Practices\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u547D\\u4EE4\\u6A21\\u5F0F\\u662F\\u6700\\u7B80\\u5355\\u548C\\u4F18\\u96C5\\u7684\\u6A21\\u5F0F\\u4E4B\\u4E00\\uFF0C\\u547D\\u4EE4\\u6A21\\u5F0F\\u4E2D\\u7684\\u547D\\u4EE4\\uFF08command\\uFF09\\u6307\\u7684\\u662F\\u4E00\\u4E2A\\u6267\\u884C\\u67D0\\u4E9B\\u7279\\u5B9A\\u4E8B\\u60C5\\u7684\\u6307\\u4EE4\\u3002\"), mdx(\"p\", null, \"\\u547D\\u4EE4\\u6A21\\u5F0F\\u6700\\u5E38\\u89C1\\u7684\\u5E94\\u7528\\u573A\\u666F\\u662F\\uFF1A\\u6709\\u65F6\\u5019\\u9700\\u8981\\u5411\\u67D0\\u4E9B\\u5BF9\\u8C61\\u53D1\\u9001\\u8BF7\\u6C42\\uFF0C\\u4F46\\u662F\\u5E76\\u4E0D\\u77E5\\u9053\\u8BF7\\u6C42\\u7684\\u63A5\\u6536\\u8005\\u662F\\u8C01\\uFF0C\\u4E5F\\u4E0D\\u77E5\\u9053\\u88AB\\u8BF7\\u6C42\\u7684\\u64CD\\u4F5C\\u662F\\u4EC0\\u4E48\\u3002\\u6B64\\u65F6\\u5E0C\\u671B\\u7528\\u4E00\\u79CD\\u677E\\u8026\\u5408\\u7684\\u65B9\\u5F0F\\u6765\\u8BBE\\u8BA1\\u7A0B\\u5E8F\\uFF0C\\u4F7F\\u5F97\\u8BF7\\u6C42\\u53D1\\u9001\\u8005\\u548C\\u8BF7\\u6C42\\u63A5\\u6536\\u8005\\u80FD\\u591F\\u6D88\\u9664\\u5F7C\\u6B64\\u4E4B\\u95F4\\u7684\\u8026\\u5408\\u5173\\u7CFB\\u3002\"), mdx(\"h2\", {\n    \"id\": \"菜单程序\"\n  }, \"\\u83DC\\u5355\\u7A0B\\u5E8F\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const button1 = document.querySelector('#button1')\\nconst button2 = document.querySelector('#button2')\\nconst button3 = document.querySelector('#button3')\\n\\nconst setCommand = function (button, command) {\\n  button.onclick = function () {\\n    command.execute()\\n  }\\n}\\n\\nconst MenuBar = {\\n  refresh() {\\n    //\\n  },\\n}\\n\\nconst SubMenu = {\\n  add() {\\n    //\\n  },\\n  del() {\\n    //\\n  },\\n}\\n\\nclass RefreshMenuBarCommand {\\n  constructor(receiver) {\\n    this.receiver = receiver\\n  }\\n\\n  execute() {\\n    this.receiver.refresh()\\n  }\\n}\\n\\n\\nclass AddSubMenuCommand {\\n  constructor(receiver) {\\n    this.receiver = receiver\\n  }\\n\\n  execute() {\\n    this.receiver.add()\\n  }\\n}\\n\\nclass DelSubMenuCommand {\\n  constructor(receiver) {\\n    this.receiver = receiver\\n  }\\n\\n  execute() {\\n    this.receiver.del()\\n  }\\n}\\n\\nconst refreshMenuBarCommand = new RefreshMenuBarCommand(MenuBar)\\nconst addSubMenuCommand = new AddSubMenuCommand(SubMenu)\\nconst delSubMenuCommand = new DelSubMenuCommand(SubMenu)\\n\\nsetCommand(button1, refreshMenuBarCommand)\\nsetCommand(button2, addSubMenuCommand)\\nsetCommand(button3, delSubMenuCommand)\\n\")), mdx(\"h2\", {\n    \"id\": \"javascript-中的命令模式\"\n  }, \"JavaScript \\u4E2D\\u7684\\u547D\\u4EE4\\u6A21\\u5F0F\"), mdx(\"p\", null, \"\\u4F20\\u7EDF OOP \\u8BED\\u8A00\\u4E2D\\uFF0C\\u547D\\u4EE4\\u6A21\\u5F0F\\u7684\\u7531\\u6765\\uFF0C\\u5176\\u5B9E\\u662F\\u56DE\\u8C03\\uFF08callback\\uFF09\\u51FD\\u6570\\u7684\\u4E00\\u4E2A\\u9762\\u5411\\u5BF9\\u8C61\\u7684\\u66FF\\u4EE3\\u54C1\"), mdx(\"p\", null, \"JavaScript \\u4F5C\\u4E3A\\u5C06\\u51FD\\u6570\\u4F5C\\u4E3A\\u4E00\\u7B49\\u5BF9\\u8C61\\u7684\\u8BED\\u8A00\\uFF0C\\u8DDF\\u7B56\\u7565\\u6A21\\u5F0F\\u4E00\\u6837\\uFF0C\\u547D\\u4EE4\\u6A21\\u5F0F\\u4E5F\\u65E9\\u5DF2\\u878D\\u5165\\u5230\\u4E86 JavaScript \\u8BED\\u8A00\\u4E4B\\u4E2D\\u3002\\u8FD0\\u7B97\\u5757\\u4E0D\\u4E00\\u5B9A\\u8981\\u5C01\\u88C5\\u5728 command.execute \\u65B9\\u6CD5\\u4E2D\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u5C01\\u88C5\\u5728\\u666E\\u901A\\u51FD\\u6570\\u4E2D\\u3002\\u51FD\\u6570\\u4F5C\\u4E3A\\u4E00\\u7B49\\u5BF9\\u8C61\\uFF0C\\u672C\\u8EAB\\u5C31\\u53EF\\u4EE5\\u88AB\\u56DB\\u5904\\u4F20\\u9012\\u3002\\u5373\\u4F7F\\u6211\\u4EEC\\u4F9D\\u7136\\u9700\\u8981\\u8BF7\\u6C42\\u201C\\u63A5\\u6536\\u8005\\u201D\\uFF0C\\u90A3\\u4E5F\\u672A\\u5FC5\\u4F7F\\u7528\\u9762\\u5411\\u5BF9\\u8C61\\u7684\\u65B9\\u5F0F\\uFF0C\\u95ED\\u5305\\u53EF\\u4EE5\\u5B8C\\u6210\\u540C\\u6837\\u7684\\u529F\\u80FD\\u3002\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const bindClick = function(button, func) {\\n  button.onclick = func\\n}\\n\\nconst MenuBar = {\\n  refresh() {\\n    console.log('\\u5237\\u65B0\\u83DC\\u5355\\u754C\\u9762')\\n  }\\n}\\n\\nconst SubMenu = {\\n  add() {\\n    console.log('\\u589E\\u52A0\\u5B50\\u83DC\\u5355')\\n  },\\n  del() {\\n    console.log('\\u5220\\u9664\\u5B50\\u83DC\\u5355')\\n  }\\n}\\n\\nbindClick(button1, MenuBar.refresh.bind(this))\\nbindClick(button2, SubMenu.add.bind(this))\\nbindClick(button3, SubMenu.del.bind(this))\\n\")), mdx(\"h2\", {\n    \"id\": \"撤销与重做\"\n  }, \"\\u64A4\\u9500\\u4E0E\\u91CD\\u505A\"), mdx(\"p\", null, \"\\u64A4\\u9500\\uFF1A\\u589E\\u52A0\\u4E00\\u4E2A\\u50A8\\u5B58\\u72B6\\u6001\\u4FE1\\u606F\\u7684\\u6808\\uFF0C\\u6BD4\\u5982\\u5C0F\\u7403\\u79FB\\u52A8\\uFF0C\\u5C31\\u8981\\u6709\\u4E00\\u4E2A\\u50A8\\u5B58\\u4F4D\\u7F6E\\u7684\\u6808\\uFF0C\\u64A4\\u9500\\u65F6\\u5C31\\u662F\\u8C03\\u7528\\u79FB\\u52A8\\u65B9\\u6CD5\\u628A\\u5C0F\\u7403\\u79FB\\u52A8\\u5230\\u539F\\u6765\\u7684\\u4F4D\\u7F6E\"), mdx(\"p\", null, \"\\u91CD\\u505A\\uFF1A\\u5982\\u679C\\u72B6\\u6001\\u4FE1\\u606F\\u6BD4\\u8F83\\u590D\\u6742\\uFF0C\\u6BD4\\u5982 Canvas \\u753B\\u56FE\\uFF0C\\u53EF\\u4EE5\\u7528\\u4E00\\u4E2A command \\u6808\\u50A8\\u5B58\\u547D\\u4EE4\\uFF0C\\u6BCF\\u6B21\\u64A4\\u9500\\u5C31\\u662F\\u53BB\\u6389\\u6700\\u540E\\u7684\\u547D\\u4EE4\\uFF0C\\u628A\\u6808\\u4E2D\\u7684\\u547D\\u4EE4\\u91CD\\u65B0\\u6267\\u884C\\u4E00\\u904D\\uFF0C\\u5F53\\u7136\\u6027\\u80FD\\u6D88\\u8017\\u8F83\\u5927\"), mdx(\"h2\", {\n    \"id\": \"命令队列\"\n  }, \"\\u547D\\u4EE4\\u961F\\u5217\"), mdx(\"p\", null, \"\\u5F53\\u4E00\\u4E2A\\u547D\\u4EE4\\u6267\\u884C\\u9700\\u8981\\u4E00\\u5B9A\\u65F6\\u95F4\\uFF0C\\u9700\\u8981\\u547D\\u4EE4\\u961F\\u5217\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E8B\\u4EF6\\u5FAA\\u73AF\\u4E2D\\u7684\\u4E8B\\u4EF6\\u961F\\u5217\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6D4F\\u89C8\\u5668\\u7684 UI \\u961F\\u5217\"))), mdx(\"p\", null, \"\\u5F53\\u4E00\\u4E2A\\u4E8B\\u4EF6\\u7ED3\\u675F\\u65F6\\uFF0C\\u8BE5\\u5982\\u4F55\\u901A\\u77E5\\u961F\\u5217\\uFF0C\\u8FDB\\u884C\\u4E0B\\u4E00\\u4E2A\\u4EFB\\u52A1\\uFF0C\\u901A\\u5E38\\u662F\\u4F7F\\u7528\\u5F02\\u6B65\\uFF0C\\u8FD8\\u53EF\\u4EE5\\u4F7F\\u7528\\u53D1\\u5E03\\u8BA2\\u9605\\u6A21\\u5F0F\"), mdx(\"h2\", {\n    \"id\": \"宏命令\"\n  }, \"\\u5B8F\\u547D\\u4EE4\"), mdx(\"p\", null, \"\\u5B8F\\u547D\\u4EE4\\u662F\\u4E00\\u7EC4\\u547D\\u4EE4\\u7684\\u96C6\\u5408\\uFF0C\\u901A\\u8FC7\\u6267\\u884C\\u5B8F\\u547D\\u4EE4\\u7684\\u65B9\\u5F0F\\uFF0C\\u53EF\\u4EE5\\u4E00\\u6B21\\u6267\\u884C\\u4E00\\u6279\\u547D\\u4EE4\"), mdx(\"p\", null, \"\\u6709\\u70B9\\u50CF\\u7EC4\\u5408\\u6A21\\u5F0F\"), mdx(\"h2\", {\n    \"id\": \"事件循环的命令模式\"\n  }, \"\\u4E8B\\u4EF6\\u5FAA\\u73AF\\u7684\\u547D\\u4EE4\\u6A21\\u5F0F\"), mdx(\"p\", null, \"\\u4E8B\\u4EF6\\u961F\\u5217 - \\u547D\\u4EE4\\u961F\\u5217\"), mdx(\"p\", null, \"\\u5B8F\\u4EFB\\u52A1 - \\u5B8F\\u547D\\u4EE4\"), mdx(\"p\", null, \"\\u5FAE\\u4EFB\\u52A1 - \\u547D\\u4EE4\"), mdx(\"p\", null, \"\\u4E0D\\u7531\\u5F97\\u53C8\\u8BA9\\u4EBA\\u60F3\\u5230\\u4E86 Promise \\uD83E\\uDD23\"), mdx(\"p\", null, \"Promise \\u4E2D\\u7684 executor \\u4E2D\\u7684\\u4EFB\\u52A1\\u662F\\u540C\\u6B65\\u4EFB\\u52A1\\u5C31\\u540C\\u6B65\\u6267\\u884C\\uFF0C\\u662F\\u5F02\\u6B65\\u5C31\\u5F02\\u6B65\\u6267\\u884C\\uFF0C\\u6E90\\u7801\\u5C31\\u662F executor(resolve, reject) \\u6CA1\\u4EC0\\u4E48\\u53EF\\u8BF4\\u7684\\uFF0C\\u8FD9\\u91CC\\u8BF4\\u4E00\\u4E0B\\u4ED6\\u7684\\u5FAE\\u4EFB\\u52A1\\uFF08then\\uFF09\\u7684\\u5B9E\\u73B0\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const p = new Promise(resolve => {\\n  console.log(1)\\n  setTimeout(() => {\\n    resolve(2)\\n  }, 1000)\\n}).then(r => {\\n  console.log(r)\\n  return 3\\n}).then(r => {\\n  console.log(r)\\n})\\nconsole.log(4)\\n\\n// \\u8F93\\u51FA\\uFF1A1 4 2 3\\n\")), mdx(\"p\", null, \"\\u719F\\u6089\\u4E8B\\u4EF6\\u5FAA\\u73AF\\u7684\\u90FD\\u53EF\\u4EE5\\u770B\\u51FA\\u5B83\\u7684\\u6267\\u884C\\u987A\\u5E8F\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"new Promise(cb)\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"console.log(1) // \\u540C\\u65F6 setTimeout \\u5728\\u6D4F\\u89C8\\u5668\\u7684\\u5B9A\\u65F6\\u5668\\u7EBF\\u7A0B\\u6302\\u8D77\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E24\\u4E2A then \\u65B9\\u6CD5\\u628A cb \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u52A0\\u5165\"), \" onFulfilledCallbacks\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"console.log(4)\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u8DDD\\u6B65\\u9AA4 2 \\u4E00\\u79D2\\u540E setTimeout \\u628A cb \\u52A0\\u5165\\u6267\\u884C\\u961F\\u5217\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6267\\u884C\\u961F\\u5217\\u4E3A\\u7A7A\\uFF0C\\u6267\\u884C cb\\uFF0Cresolve(2)\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"resolve \\u65F6 onFulfilledCallbacks \\u4E2D\\u7684 cb \\u4F9D\\u6B21\\u6267\\u884C\"))), mdx(\"p\", null, \"\\u5173\\u952E\\u5C31\\u662F\\u7B2C 7 \\u6B65\\u4E2D\\u7684 onFulfilledCallbacks.forEach(cb => cb(self.value)) \\u662F\\u5728 resolve \\u65F6\\u4F9D\\u6B21\\u5168\\u90E8\\u6267\\u884C\\u4E86\\uFF0C\\u7531\\u6B64\\u5B9E\\u73B0\\u7684\\u5FAE\\u4EFB\\u52A1\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/note/javascript-design-patterns-and-development-practices/command"}},"staticQueryHashes":["318001574","3787687951","3787687951"]}