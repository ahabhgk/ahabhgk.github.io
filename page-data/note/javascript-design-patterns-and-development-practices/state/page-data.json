{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx","path":"/note/javascript-design-patterns-and-development-practices/state","result":{"data":{"page":{"__typename":"MdxPage","title":"状态模式","slug":"/note/javascript-design-patterns-and-development-practices/state","excerpt":"…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"状态模式\",\n  \"slug\": \"/note/javascript-design-patterns-and-development-practices/state\",\n  \"date\": \"2019-07-14T00:00:00.000Z\",\n  \"description\": \"《JavaScript 设计模式与开发实践》读书笔记\",\n  \"tags\": [\"Note\", \"JavaScript Design Patterns and Development Practices\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u72B6\\u6001\\u6A21\\u5F0F\\u7684\\u5173\\u952E\\u662F\\u533A\\u5206\\u4E8B\\u7269\\u5185\\u90E8\\u7684\\u72B6\\u6001\\uFF0C\\u4E8B\\u7269\\u5185\\u90E8\\u72B6\\u6001\\u7684\\u6539\\u53D8\\u5F80\\u5F80\\u4F1A\\u5E26\\u6765\\u4E8B\\u7269\\u7684\\u884C\\u4E3A\\u6539\\u53D8\"), mdx(\"p\", null, \"\\u5C06\\u72B6\\u6001\\u5C01\\u88C5\\u6210\\u72EC\\u7ACB\\u7684\\u7C7B\\uFF0C\\u5E76\\u5C06\\u8BF7\\u6C42\\u59D4\\u6258\\u7ED9\\u5F53\\u524D\\u7684\\u72B6\\u6001\\u5BF9\\u8C61\\uFF0C\\u5F53\\u5BF9\\u8C61\\u7684\\u5185\\u90E8\\u72B6\\u6001\\u6539\\u53D8\\u65F6\\uFF0C\\u4F1A\\u5E26\\u6765\\u4E0D\\u540C\\u7684\\u884C\\u4E3A\\u53D8\\u5316\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528\\u7684\\u5BF9\\u8C61\\uFF0C\\u5728\\u4E0D\\u540C\\u7684\\u72B6\\u6001\\u4E0B\\u5177\\u6709\\u622A\\u7136\\u4E0D\\u540C\\u7684\\u884C\\u4E3A\\uFF0C\\u8FD9\\u4E2A\\u5BF9\\u8C61\\u770B\\u8D77\\u6765\\u662F\\u4ECE\\u4E0D\\u540C\\u7684\\u7C7B\\u4E2D\\u5B9E\\u4F8B\\u5316\\u800C\\u6765\\u7684\\uFF0C\\u5B9E\\u9645\\u4E0A\\u8FD9\\u662F\\u4F7F\\u7528\\u4E86\\u59D4\\u6258\\u7684\\u6548\\u679C\"), mdx(\"h2\", {\n    \"id\": \"例子\"\n  }, \"\\u4F8B\\u5B50\"), mdx(\"p\", null, \"\\u4E00\\u4E2A\\u7535\\u706F\\u5F00\\u5173\\uFF0C\\u6309\\u4E00\\u4E0B\\u5F00\\u706F\\uFF0C\\u518D\\u6309\\u4E00\\u4E0B\\u5173\\u706F\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"class Light {\\n  constructor() {\\n    this.state = 'off'\\n    this.dom = null\\n    this.init()\\n  }\\n\\n  init() {\\n    // ...\\n  }\\n\\n  trigger() {\\n    if (this.state === 'off') {\\n      this.state = 'on'\\n      // ...\\n    } else if (this.state === 'on') {\\n      this.state = 'off'\\n      // ...\\n    }\\n  }\\n}\\n\")), mdx(\"p\", null, \"\\u73B0\\u5728\\u6211\\u4EEC\\u7F16\\u5199\\u4E86\\u4E00\\u4E2A\\u72B6\\u6001\\u673A\\uFF0C\\u7B80\\u5355\\u800C\\u7F1C\\u5BC6\\uFF0C\\u53EF\\u60DC\\u4E16\\u754C\\u4E0A\\u4E0D\\u6B62\\u4E00\\u79CD\\u7535\\u706F\\uFF0C\\u6709\\u7684\\u706F\\u6309\\u4E00\\u4E0B\\u5F00\\u5173\\u662F\\u5F3A\\u5149\\uFF0C\\u518D\\u6309\\u4E00\\u4E0B\\u662F\\u5F31\\u5149\\uFF0C\\u518D\\u6309\\u4E00\\u4E0B\\u624D\\u5173\\u95ED\\uFF0C\\u5982\\u679C\\u6211\\u4EEC\\u8FDB\\u884C\\u4FEE\\u6539\\uFF0C\\u5C31\\u4F1A\\u53D1\\u73B0\\u4E4B\\u524D\\u7684\\u4EE3\\u7801\\u4E0D\\u7B26\\u5408\\u5F00\\u653E\\u5C01\\u95ED\\u539F\\u5219\"), mdx(\"h2\", {\n    \"id\": \"重构\"\n  }, \"\\u91CD\\u6784\"), mdx(\"p\", null, \"\\u901A\\u5E38\\u6211\\u4EEC\\u8C08\\u5230\\u5C01\\u88C5\\uFF0C\\u4E00\\u822C\\u90FD\\u4F1A\\u4F18\\u5148\\u5C01\\u88C5\\u5BF9\\u8C61\\u7684\\u884C\\u4E3A\\uFF0C\\u800C\\u4E0D\\u662F\\u5BF9\\u8C61\\u7684\\u72B6\\u6001\\u3002\\u4F46\\u5728\\u72B6\\u6001\\u6A21\\u5F0F\\u4E2D\\u521A\\u597D\\u76F8\\u53CD\\uFF0C\\u72B6\\u6001\\u6A21\\u5F0F\\u7684\\u5173\\u952E\\u662F\\u628A\\u4E8B\\u7269\\u7684\\u6BCF\\u79CD\\u72B6\\u6001\\u90FD\\u5C01\\u88C5\\u6210\\u5355\\u72EC\\u7684\\u7C7B\\uFF0C\\u8DDF\\u6B64\\u79CD\\u72B6\\u6001\\u6709\\u5173\\u7684\\u884C\\u4E3A\\u90FD\\u88AB\\u5C01\\u88C5\\u5728\\u8FD9\\u4E2A\\u7C7B\\u7684\\u5185\\u90E8\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"class OffLightState {\\n  constructor(light) {\\n    this.light = light\\n  }\\n  trigger() {\\n    console.log('\\u5F31\\u5149')\\n    this.light.setState(this.light.weakLightState)\\n  }\\n}\\n\\nclass WeakLightState {\\n  constructor(light) {\\n    this.light = light\\n  }\\n  trigger() {\\n    console.log('\\u5F3A\\u5149')\\n    this.light.setState(this.light.strongLightState)\\n  }\\n}\\n\\nclass StrongLightState {\\n  constructor(light) {\\n    this.light = light\\n  }\\n  trigger() {\\n    console.log('\\u5173\\u706F')\\n    this.light.setState(this.light.offLightState)\\n  }\\n}\\n\\nclass Light {\\n  constructor() {\\n    this.offLightState = new OffLightState()\\n    this.weakLightState = new WeakLightState()\\n    this.strongLightState = new StrongLightState()\\n    this.state = this.offLightState\\n  }\\n\\n  setState(newState) {\\n    this.state = newState\\n  }\\n}\\n\")), mdx(\"p\", null, \"\\u7EE7\\u7EED\\u4F18\\u5316\\uFF0Cconsole.log \\u6240\\u4EE3\\u8868\\u7684\\u4E00\\u7CFB\\u5217\\u64CD\\u4F5C\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528\\u4EE3\\u7406\\u6A21\\u5F0F\\uFF0C\\u5F53\\u8BBF\\u95EE\\u65B0\\u7684\\u72B6\\u6001\\u65F6\\uFF0C\\u7531\\u4EE3\\u7406\\uFF08Proxy \\u7684 get\\uFF09\\u89E6\\u53D1 console.log \\u7B49\\u4E00\\u7CFB\\u5217\\u64CD\\u4F5C\"), mdx(\"h2\", {\n    \"id\": \"state-抽象类\"\n  }, \"State \\u62BD\\u8C61\\u7C7B\"), mdx(\"p\", null, \"JavaScript \\u4E2D\\u6CA1\\u6709\\u62BD\\u8C61\\u7C7B\\uFF0C\\u6211\\u4EEC\\u53EA\\u80FD\\u8FD9\\u6837\\u5B9E\\u73B0\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"class State {\\n  constructor(light) {\\n    this.light = light\\n  }\\n  trigger() {\\n    throw new Error('\\u62BD\\u8C61\\u7C7B triggle \\u65B9\\u6CD5\\u5FC5\\u987B\\u91CD\\u5199')\\n  }\\n}\\n\\nclass OffLightState extends State {\\n  constructor(light) {\\n    super(light)\\n  }\\n  trigger() {\\n    this.light.setState(this.light.weakLightState)\\n  }\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"状态模式和策略模式\"\n  }, \"\\u72B6\\u6001\\u6A21\\u5F0F\\u548C\\u7B56\\u7565\\u6A21\\u5F0F\"), mdx(\"p\", null, \"\\u7B56\\u7565\\u6A21\\u5F0F\\u548C\\u72B6\\u6001\\u6A21\\u5F0F\\u7684\\u76F8\\u540C\\u70B9\\u662F\\uFF0C\\u5B83\\u4EEC\\u90FD\\u6709\\u4E00\\u4E2A\\u4E0A\\u4E0B\\u6587\\u3001\\u4E00\\u4E9B\\u7B56\\u7565\\u6216\\u8005\\u72B6\\u6001\\u7C7B\\uFF0C\\u4E0A\\u4E0B\\u6587\\u628A\\u8BF7\\u6C42\\u59D4\\u6258\\u7ED9\\u8FD9\\u4E9B\\u7C7B\\u6765\\u6267\\u884C\"), mdx(\"p\", null, \"\\u5B83\\u4EEC\\u4E4B\\u95F4\\u7684\\u533A\\u522B\\u662F\\u7B56\\u7565\\u6A21\\u5F0F\\u4E2D\\u7684\\u5404\\u4E2A\\u7B56\\u7565\\u7C7B\\u4E4B\\u95F4\\u662F\\u5E73\\u7B49\\u53C8\\u5E73\\u884C\\u7684\\uFF0C\\u5B83\\u4EEC\\u4E4B\\u95F4\\u6CA1\\u6709\\u4EFB\\u4F55\\u8054\\u7CFB\\uFF0C\\u6240\\u4EE5\\u5BA2\\u6237\\u5FC5\\u987B\\u719F\\u77E5\\u8FD9\\u4E9B\\u7B56\\u7565\\u7C7B\\u7684\\u4F5C\\u7528\\uFF0C\\u4EE5\\u4FBF\\u5BA2\\u6237\\u53EF\\u4EE5\\u968F\\u65F6\\u4E3B\\u52A8\\u5207\\u6362\\u7B97\\u6CD5\\uFF1B\\u800C\\u5728\\u72B6\\u6001\\u6A21\\u5F0F\\u4E2D\\uFF0C\\u72B6\\u6001\\u548C\\u72B6\\u6001\\u5BF9\\u5E94\\u7684\\u884C\\u4E3A\\u662F\\u65E9\\u5DF2\\u88AB\\u5C01\\u88C5\\u597D\\u7684\\uFF0C\\u72B6\\u6001\\u4E4B\\u95F4\\u7684\\u5207\\u6362\\u4E5F\\u65E9\\u88AB\\u89C4\\u5B9A\\u5B8C\\u6210\\uFF0C\\u201C\\u6539\\u53D8\\u884C\\u4E3A\\u201D\\u8FD9\\u4EF6\\u4E8B\\u60C5\\u53D1\\u751F\\u5728\\u72B6\\u6001\\u6A21\\u5F0F\\u5185\\u90E8\\u3002\\u5BF9\\u5BA2\\u6237\\u6765\\u8BF4\\uFF0C\\u5E76\\u4E0D\\u9700\\u8981\\u4E86\\u89E3\\u8FD9\\u4E9B\\u7EC6\\u8282\\u3002\\u8FD9\\u6B63\\u662F\\u72B6\\u6001\\u6A21\\u5F0F\\u7684\\u4F5C\\u7528\\u6240\\u5728\"), mdx(\"h2\", {\n    \"id\": \"javascript-的状态模式\"\n  }, \"JavaScript \\u7684\\u72B6\\u6001\\u6A21\\u5F0F\"), mdx(\"p\", null, \"\\u4F7F\\u7528\\u5F3A\\u5236\\u66F4\\u6539 this \\u6307\\u5411\\uFF0C\\u5C06\\u72B6\\u6001\\u5BF9\\u8C61\\u7684\\u65B9\\u6CD5\\u8FDB\\u884C\\u59D4\\u6258\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const FSM = {\\n  off: {\\n    trigger() {\\n      console.log('\\u5F00\\u706F')\\n      this.state = FSM.on\\n    }\\n  },\\n  on: {\\n    trigger() {\\n      console.log('\\u5173\\u706F')\\n      this.state = FSM.off\\n    }\\n  },\\n}\\n\\nclass Light {\\n  constructor() {\\n    this.state = FSM.off\\n  }\\n  trigger() {\\n    this.state.trigger.call(this)\\n  }\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"优缺点\"\n  }, \"\\u4F18\\u7F3A\\u70B9\"), mdx(\"p\", null, \"\\u4F18\\u70B9\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5B9A\\u4E49\\u4E86\\u72B6\\u6001\\u4E0E\\u884C\\u4E3A\\u4E4B\\u95F4\\u7684\\u5173\\u7CFB\\uFF0C\\u5E76\\u5C06\\u5B83\\u4EEC\\u5C01\\u88C5\\u5728\\u4E00\\u4E2A\\u7C7B\\u91CC\\u3002\\u901A\\u8FC7\\u589E\\u52A0\\u65B0\\u7684\\u72B6\\u6001\\u7C7B\\uFF0C\\u5F88\\u5BB9\\u6613\\u589E\\u52A0\\u65B0\\u7684\\u72B6\\u6001\\u548C\\u8F6C\\u6362\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u907F\\u514DContext\\u65E0\\u9650\\u81A8\\u80C0\\uFF0C\\u72B6\\u6001\\u5207\\u6362\\u7684\\u903B\\u8F91\\u88AB\\u5206\\u5E03\\u5728\\u72B6\\u6001\\u7C7B\\u4E2D\\uFF0C\\u4E5F\\u53BB\\u6389\\u4E86Context\\u4E2D\\u539F\\u672C\\u8FC7\\u591A\\u7684\\u6761\\u4EF6\\u5206\\u652F\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u7528\\u5BF9\\u8C61\\u4EE3\\u66FF\\u5B57\\u7B26\\u4E32\\u6765\\u8BB0\\u5F55\\u5F53\\u524D\\u72B6\\u6001\\uFF0C\\u4F7F\\u5F97\\u72B6\\u6001\\u7684\\u5207\\u6362\\u66F4\\u52A0\\u4E00\\u76EE\\u4E86\\u7136\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Context\\u4E2D\\u7684\\u8BF7\\u6C42\\u52A8\\u4F5C\\u548C\\u72B6\\u6001\\u7C7B\\u4E2D\\u5C01\\u88C5\\u7684\\u884C\\u4E3A\\u53EF\\u4EE5\\u975E\\u5E38\\u5BB9\\u6613\\u5730\\u72EC\\u7ACB\\u53D8\\u5316\\u800C\\u4E92\\u4E0D\\u5F71\\u54CD\"))), mdx(\"p\", null, \"\\u7F3A\\u70B9\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4F1A\\u5728\\u7CFB\\u7EDF\\u4E2D\\u5B9A\\u4E49\\u8BB8\\u591A\\u72B6\\u6001\\u7C7B\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u7531\\u4E8E\\u903B\\u8F91\\u5206\\u6563\\u5728\\u72B6\\u6001\\u7C7B\\u4E2D\\uFF0C\\u867D\\u7136\\u907F\\u5F00\\u4E86\\u4E0D\\u53D7\\u6B22\\u8FCE\\u7684\\u6761\\u4EF6\\u5206\\u652F\\u8BED\\u53E5\\uFF0C\\u4F46\\u4E5F\\u9020\\u6210\\u4E86\\u903B\\u8F91\\u5206\\u6563\\u7684\\u95EE\\u9898\\uFF0C\\u6211\\u4EEC\\u65E0\\u6CD5\\u5728\\u4E00\\u4E2A\\u5730\\u65B9\\u5C31\\u770B\\u51FA\\u6574\\u4E2A\\u72B6\\u6001\\u673A\\u7684\\u903B\\u8F91\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/note/javascript-design-patterns-and-development-practices/state"}},"staticQueryHashes":["318001574","3787687951","3787687951"]}