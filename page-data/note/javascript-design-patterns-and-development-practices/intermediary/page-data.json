{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx","path":"/note/javascript-design-patterns-and-development-practices/intermediary","result":{"data":{"page":{"__typename":"MdxPage","title":"中介者模式","slug":"/note/javascript-design-patterns-and-development-practices/intermediary","excerpt":"…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"中介者模式\",\n  \"slug\": \"/note/javascript-design-patterns-and-development-practices/intermediary\",\n  \"date\": \"2019-07-12T00:00:00.000Z\",\n  \"description\": \"《JavaScript 设计模式与开发实践》读书笔记\",\n  \"tags\": [\"Note\", \"JavaScript Design Patterns and Development Practices\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u4E2D\\u4ECB\\u8005\\u6A21\\u5F0F\\u7684\\u4F5C\\u7528\\u5C31\\u662F\\u89E3\\u9664\\u5BF9\\u8C61\\u4E0E\\u5BF9\\u8C61\\u4E4B\\u95F4\\u7684\\u7D27\\u8026\\u5408\\u5173\\u7CFB\\u3002\\u589E\\u52A0\\u4E00\\u4E2A\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u540E\\uFF0C\\u6240\\u6709\\u7684\\u76F8\\u5173\\u5BF9\\u8C61\\u90FD\\u901A\\u8FC7\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u6765\\u901A\\u4FE1\\uFF0C\\u800C\\u4E0D\\u662F\\u4E92\\u76F8\\u5F15\\u7528\\uFF0C\\u6240\\u4EE5\\u5F53\\u4E00\\u4E2A\\u5BF9\\u8C61\\u53D1\\u751F\\u6539\\u53D8\\u65F6\\uFF0C\\u53EA\\u9700\\u8981\\u901A\\u77E5\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u5373\\u53EF\\u3002\\u4E2D\\u4ECB\\u8005\\u4F7F\\u5404\\u5BF9\\u8C61\\u4E4B\\u95F4\\u8026\\u5408\\u677E\\u6563\\uFF0C\\u800C\\u4E14\\u53EF\\u4EE5\\u72EC\\u7ACB\\u5730\\u6539\\u53D8\\u5B83\\u4EEC\\u4E4B\\u95F4\\u7684\\u4EA4\\u4E92\\u3002\\u4E2D\\u4ECB\\u8005\\u6A21\\u5F0F\\u4F7F\\u7F51\\u72B6\\u7684\\u591A\\u5BF9\\u591A\\u5173\\u7CFB\\u53D8\\u6210\\u4E86\\u76F8\\u5BF9\\u7B80\\u5355\\u7684\\u4E00\\u5BF9\\u591A\\u5173\\u7CFB\"), mdx(\"p\", null, \"\\u4E2D\\u4ECB\\u8005\\u6A21\\u5F0F\\u662F\\u8FCE\\u5408\\u8FEA\\u7C73\\u7279\\u6CD5\\u5219\\u7684\\u4E00\\u79CD\\u5B9E\\u73B0\\u3002\\u8FEA\\u7C73\\u7279\\u6CD5\\u5219\\u4E5F\\u53EB\\u6700\\u5C11\\u77E5\\u8BC6\\u539F\\u5219\\uFF0C\\u662F\\u6307\\u4E00\\u4E2A\\u5BF9\\u8C61\\u5E94\\u8BE5\\u5C3D\\u53EF\\u80FD\\u5C11\\u5730\\u4E86\\u89E3\\u53E6\\u5916\\u7684\\u5BF9\\u8C61\\uFF08\\u7C7B\\u4F3C\\u4E0D\\u548C\\u964C\\u751F\\u4EBA\\u8BF4\\u8BDD\\uFF09\\u3002\\u5982\\u679C\\u5BF9\\u8C61\\u4E4B\\u95F4\\u7684\\u8026\\u5408\\u6027\\u592A\\u9AD8\\uFF0C\\u4E00\\u4E2A\\u5BF9\\u8C61\\u53D1\\u751F\\u6539\\u53D8\\u4E4B\\u540E\\uFF0C\\u96BE\\u514D\\u4F1A\\u5F71\\u54CD\\u5230\\u5176\\u4ED6\\u7684\\u5BF9\\u8C61\\uFF0C\\u5728\\u4E2D\\u4ECB\\u8005\\u6A21\\u5F0F\\u91CC\\uFF0C\\u5BF9\\u8C61\\u4E4B\\u95F4\\u51E0\\u4E4E\\u4E0D\\u77E5\\u9053\\u5F7C\\u6B64\\u7684\\u5B58\\u5728\\uFF0C\\u5B83\\u4EEC\\u53EA\\u80FD\\u901A\\u8FC7\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u6765\\u4E92\\u76F8\\u5F71\\u54CD\\u5BF9\\u65B9\"), mdx(\"h2\", {\n    \"id\": \"例子\"\n  }, \"\\u4F8B\\u5B50\"), mdx(\"p\", null, \"\\u5047\\u5982\\u505A\\u4E00\\u4E2A\\u9B45\\u65CF\\u624B\\u673A\\u8BA2\\u8D2D\\u9875\\u9762\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u9009\\u62E9\\u624B\\u673A\\u989C\\u8272\\u548C\\u8D2D\\u4E70\\u6570\\u91CF\\uFF0C\\u5BF9\\u5E94\\u989C\\u8272\\u7684\\u624B\\u673A\\u4E5F\\u6709\\u5E93\\u5B58\\uFF0C\\u73B0\\u5728\\u5BA2\\u6237\\u53EF\\u4EE5\\u9009\\u62E9\\u989C\\u8272\\uFF0C\\u8F93\\u5165\\u6570\\u91CF\\uFF0C\\u5982\\u679C\\u6570\\u91CF\\u5408\\u7406\\u4E14\\u4E0D\\u8D85\\u8FC7\\u5E93\\u5B58\\u5219\\u53EF\\u4EE5\\u8D2D\\u4E70\\uFF0C\\u4E0B\\u65B9\\u4F1A\\u663E\\u793A\\u9009\\u62E9\\u7684\\u989C\\u8272\\u548C\\u6570\\u91CF\\uFF0C\\u53EF\\u4EE5\\u8D2D\\u4E70\\u65F6\\u5E95\\u90E8\\u8D2D\\u4E70\\u6309\\u94AE\\u624D\\u53EF\\u4EE5\\u70B9\\u51FB\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\"\n  }), \"// ...\\n<div>\\n  <select id=\\\"colorSelector\\\">\\n    <option value=\\\"\\\">\\u8BF7\\u9009\\u62E9</option>\\n    <option value=\\\"red\\\">\\u7EA2\\u8272</option>\\n    <option value=\\\"blue\\\">\\u84DD\\u8272</option>\\n  </select>\\n\\n  <input id=\\\"numberSelector\\\" />\\n</div>\\n\\n<div>\\n  <span id=\\\"colorDisplay\\\"></span>\\n  <span id=\\\"numberDisplay\\\"></span>\\n</div>\\n\\n<button id=\\\"buy\\\" type=\\\"button\\\" disabled=\\\"true\\\">\\u8D2D\\u4E70</button>\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// data\\nconst data = {\\n  red: 3,\\n  blue: 5,\\n}\\n\\nconst colorSelector = document.querySelector('#colorSelector')\\nconst numberSelector = document.querySelector('#numberSelector')\\nconst colorDisplay = document.querySelector('#colorDisplay')\\nconst numberDisplay = document.querySelector('#numberDisplay')\\nconst buy = document.querySelector('#buy')\\n\\nfunction canBuy(color, number) {\\n  if (number && (number <= 0 || number > data[color])) {\\n    return false\\n  }\\n  return true\\n}\\n\\nfunction numberDisplayContent(color, number) {\\n  if (!color) {\\n    return '\\u8BF7\\u9009\\u62E9\\u989C\\u8272'\\n  }\\n  if (number <= 0) {\\n    return '\\u8BF7\\u8F93\\u5165\\u5927\\u4E8E\\u96F6\\u7684\\u6570'\\n  }\\n  if (number > data[color]) {\\n    return '\\u6570\\u91CF\\u5927\\u4E8E\\u5E93\\u5B58'\\n  }\\n  return number\\n}\\n\\ncolorSelector.addEventListener('change', () => {\\n  colorDisplay.innerText = colorSelector.value\\n  numberDisplay.innerText = numberDisplayContent(numberSelector.value)\\n  if (canBuy(numberSelector.value)) {\\n    buy.disabled = false\\n  } else {\\n    buy.disabled = true\\n  }\\n})\\nnumberSelector.addEventListener('input', () => {\\n  numberDisplay.innerText = numberDisplayContent(numberSelector.value)\\n  if (canBuy(numberSelector.value)) {\\n    buy.disabled = false\\n  } else {\\n    buy.disabled = true\\n  }\\n})\\n\")), mdx(\"p\", null, \"\\u73B0\\u5728\\u7531\\u4E8E colorSelector \\u548C numberSelector \\u5728\\u53D8\\u5316\\u65F6\\u90FD\\u8981\\u5224\\u65AD canBuy\\uFF0CcolorDisplay \\u4F9D\\u8D56\\u4E8E numberSelector\\uFF0C\\u6CA1\\u6709\\u89E3\\u8026\\uFF0C\\u5982\\u679C\\u8981\\u589E\\u52A0\\u5185\\u5B58\\u7684\\u9009\\u62E9\\u5219\\u8981\\u4FEE\\u6539\\u5F88\\u591A\"), mdx(\"p\", null, \"\\u5F15\\u5165\\u4E2D\\u4ECB\\u8005\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// data\\nconst data = {\\n  'red&32': 3,\\n  'red&64': 5,\\n  'blue&32': 7,\\n  'blue&64': 2,\\n}\\n\\nconst colorSelector = document.querySelector('#colorSelector')\\nconst numberSelector = document.querySelector('#numberSelector')\\nconst memorySelector = document.querySelector('#memorySelector')\\nconst colorDisplay = document.querySelector('#colorDisplay')\\nconst numberDisplay = document.querySelector('#numberDisplay')\\nconst memoryDisplay = document.querySelector('#memoryDisplay')\\nconst buy = document.querySelector('#buy')\\n\\nfunction canBuy(key, number) {\\n  if (number && (number <= 0 || number > data[key])) {\\n    return false\\n  }\\n  return true\\n}\\n\\nconst mediator = {\\n  changed(selector) {\\n    if (colorSelector.value) {\\n      colorDisplay.innerText = '\\u8BF7\\u9009\\u62E9\\u989C\\u8272'\\n      return\\n    }\\n    if (numberSelector.value) {\\n      numberDisplay.innerText = '\\u8BF7\\u8F93\\u5165\\u6570\\u91CF'\\n      return\\n    }\\n    if (memorySelector.value) {\\n      memoryDisplay.innerText = '\\u8BF7\\u9009\\u62E9\\u5185\\u5B58\\u5927\\u5C0F'\\n      return \\n    }\\n\\n    const key = `${colorSelector.value}&${memorySelector.value}`\\n\\n    if (selector === colorSelector) {\\n      colorDisplay.innerText = selector.value\\n    } else if (selector === numberSelector) {\\n      numberDisplay.innerText = selector.value <= 0\\n        ? '\\u8BF7\\u8F93\\u5165\\u5927\\u4E8E\\u96F6\\u7684\\u6570'\\n        : selector.value > data[key]\\n        ? '\\u6570\\u91CF\\u5927\\u4E8E\\u5E93\\u5B58'\\n        : selector.value\\n    } else if (selector === memorySelector) {\\n      memoryDisplay.innerText = selector.value\\n    }\\n\\n    if (canBuy(key, selector.value)) {\\n      buy.disabled = false\\n    } else {\\n      buy.disabled = true\\n    }\\n  },\\n}\\n\\ncolorSelector.addEventListener('change', function () {\\n  mediator.changed(this)\\n})\\nnumberSelector.addEventListener('input', function () {\\n  mediator.changed(this)\\n})\\nmemorySelector.addEventListener('change', function () {\\n  mediator.changed(this)\\n})\\n\")), mdx(\"p\", null, \"\\u4E4B\\u540E\\u6211\\u4EEC\\u60F3\\u8981\\u589E\\u52A0\\u9700\\u6C42\\uFF0C\\u53EA\\u9700\\u6539\\u52A8\\u4E2D\\u4ECB\\u8005\\u5C31\\u884C\"), mdx(\"h2\", {\n    \"id\": \"优缺点\"\n  }, \"\\u4F18\\u7F3A\\u70B9\"), mdx(\"p\", null, \"\\u4F18\\u70B9\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u4E2D\\u4ECB\\u8005\\u6A21\\u5F0F\\u4F7F\\u5404\\u4E2A\\u5BF9\\u8C61\\u4E4B\\u95F4\\u5F97\\u4EE5\\u89E3\\u8026\\uFF0C\\u4EE5\\u4E2D\\u4ECB\\u8005\\u548C\\u5BF9\\u8C61\\u4E4B\\u95F4\\u7684\\u4E00\\u5BF9\\u591A\\u5173\\u7CFB\\u53D6\\u4EE3\\u4E86\\u5BF9\\u8C61\\u4E4B\\u95F4\\u7684\\u7F51\\u72B6\\u591A\\u5BF9\\u591A\\u5173\\u7CFB\\u3002\\u5404\\u4E2A\\u5BF9\\u8C61\\u53EA\\u9700\\u5173\\u6CE8\\u81EA\\u8EAB\\u529F\\u80FD\\u7684\\u5B9E\\u73B0\\uFF0C\\u5BF9\\u8C61\\u4E4B\\u95F4\\u7684\\u4EA4\\u4E92\\u5173\\u7CFB\\u4EA4\\u7ED9\\u4E86\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u6765\\u5B9E\\u73B0\\u548C\\u7EF4\\u62A4\")), mdx(\"p\", null, \"\\u7F3A\\u70B9\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7CFB\\u7EDF\\u4E2D\\u4F1A\\u65B0\\u589E\\u4E00\\u4E2A\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\uFF0C\\u56E0\\u4E3A\\u5BF9\\u8C61\\u4E4B\\u95F4\\u4EA4\\u4E92\\u7684\\u590D\\u6742\\u6027\\uFF0C\\u8F6C\\u79FB\\u6210\\u4E86\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u7684\\u590D\\u6742\\u6027\\uFF0C\\u4F7F\\u5F97\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u7ECF\\u5E38\\u662F\\u5DE8\\u5927\\u7684\\u3002\\u4E2D\\u4ECB\\u8005\\u5BF9\\u8C61\\u81EA\\u8EAB\\u5F80\\u5F80\\u5C31\\u662F\\u4E00\\u4E2A\\u96BE\\u4EE5\\u7EF4\\u62A4\\u7684\\u5BF9\\u8C61\")), mdx(\"p\", null, \"\\u4E2D\\u4ECB\\u8005\\u6A21\\u5F0F\\u53EF\\u4EE5\\u975E\\u5E38\\u65B9\\u4FBF\\u5730\\u5BF9\\u6A21\\u5757\\u6216\\u8005\\u5BF9\\u8C61\\u8FDB\\u884C\\u89E3\\u8026\\uFF0C\\u4F46\\u5BF9\\u8C61\\u4E4B\\u95F4\\u5E76\\u975E\\u4E00\\u5B9A\\u9700\\u8981\\u89E3\\u8026\\u3002\\u5728\\u5B9E\\u9645\\u9879\\u76EE\\u4E2D\\uFF0C\\u6A21\\u5757\\u6216\\u5BF9\\u8C61\\u4E4B\\u95F4\\u6709\\u4E00\\u4E9B\\u4F9D\\u8D56\\u5173\\u7CFB\\u662F\\u5F88\\u6B63\\u5E38\\u7684\\u3002\\u6BD5\\u7ADF\\u6211\\u4EEC\\u5199\\u7A0B\\u5E8F\\u662F\\u4E3A\\u4E86\\u5FEB\\u901F\\u5B8C\\u6210\\u9879\\u76EE\\u4EA4\\u4ED8\\u751F\\u4EA7\\uFF0C\\u800C\\u4E0D\\u662F\\u5806\\u780C\\u6A21\\u5F0F\\u548C\\u8FC7\\u5EA6\\u8BBE\\u8BA1\\u3002\\u5173\\u952E\\u5C31\\u5728\\u4E8E\\u5982\\u4F55\\u53BB\\u8861\\u91CF\\u5BF9\\u8C61\\u4E4B\\u95F4\\u7684\\u8026\\u5408\\u7A0B\\u5EA6\\u3002\\u4E00\\u822C\\u6765\\u8BF4\\uFF0C\\u5982\\u679C\\u5BF9\\u8C61\\u4E4B\\u95F4\\u7684\\u590D\\u6742\\u8026\\u5408\\u786E\\u5B9E\\u5BFC\\u81F4\\u8C03\\u7528\\u548C\\u7EF4\\u62A4\\u51FA\\u73B0\\u4E86\\u56F0\\u96BE\\uFF0C\\u800C\\u4E14\\u8FD9\\u4E9B\\u8026\\u5408\\u5EA6\\u968F\\u9879\\u76EE\\u7684\\u53D8\\u5316\\u5448\\u6307\\u6570\\u589E\\u957F\\u66F2\\u7EBF\\uFF0C\\u90A3\\u6211\\u4EEC\\u5C31\\u53EF\\u4EE5\\u8003\\u8651\\u7528\\u4E2D\\u4ECB\\u8005\\u6A21\\u5F0F\\u6765\\u91CD\\u6784\\u4EE3\\u7801\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/note/javascript-design-patterns-and-development-practices/intermediary"}},"staticQueryHashes":["318001574","3787687951","3787687951"]}