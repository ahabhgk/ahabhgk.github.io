{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx","path":"/note/mysql-must-know","result":{"data":{"page":{"__typename":"MdxPage","title":"MySQL 必知必会","slug":"/note/mysql-must-know","excerpt":"主键：一列（或一组列），其值能够唯一区分表中每个行 任意两行都不具有相同的主键值 每一行都必须具有一个主键（不为 NULL…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"MySQL 必知必会\",\n  \"slug\": \"/note/mysql-must-know\",\n  \"date\": \"2020-01-05T00:00:00.000Z\",\n  \"description\": \"《MySQL 必知必会》读书笔记\",\n  \"tags\": [\"Note\", \"MySQL Must Know\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u4E3B\\u952E\\uFF1A\\u4E00\\u5217\\uFF08\\u6216\\u4E00\\u7EC4\\u5217\\uFF09\\uFF0C\\u5176\\u503C\\u80FD\\u591F\\u552F\\u4E00\\u533A\\u5206\\u8868\\u4E2D\\u6BCF\\u4E2A\\u884C\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4EFB\\u610F\\u4E24\\u884C\\u90FD\\u4E0D\\u5177\\u6709\\u76F8\\u540C\\u7684\\u4E3B\\u952E\\u503C\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6BCF\\u4E00\\u884C\\u90FD\\u5FC5\\u987B\\u5177\\u6709\\u4E00\\u4E2A\\u4E3B\\u952E\\uFF08\\u4E0D\\u4E3A NULL\\uFF09\"))), mdx(\"p\", null, \"\\u4E60\\u60EF\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E0D\\u66F4\\u65B0\\u4E3B\\u952E\\u5217\\u4E2D\\u7684\\u503C\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E0D\\u91CD\\u7528\\u4E3B\\u952E\\u5217\\u4E2D\\u7684\\u503C\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E0D\\u5728\\u4E3B\\u952E\\u5217\\u4E2D\\u4F7F\\u7528\\u53EF\\u80FD\\u4F1A\\u66F4\\u6539\\u7684\\u503C\"))), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SHOW DATABASES;\\nSHOW TABLES;\\nSHOW COLUMNS FROM klass; -- \\u8FD4\\u56DE\\u5F53\\u524D\\u9009\\u62E9\\u7684\\u6570\\u636E\\u5E93\\u5185\\u53EF\\u7528\\u8868\\u7684\\u5217\\u8868\\uFF0C\\u53EF\\u7528 DESCRIBE klass; \\u4EE3\\u66FF\\nSHOW STATUS; -- \\u7528\\u4E8E\\u663E\\u793A\\u5E7F\\u6CDB\\u7684\\u670D\\u52A1\\u5668\\u72B6\\u6001\\u4FE1\\u606F\\nSHOW CREATE DATABASE; -- \\u663E\\u793A\\u521B\\u5EFA\\u7279\\u5B9A\\u6570\\u636E\\u5E93\\nSHOW CREATE TABLE; -- \\u663E\\u793A\\u521B\\u5EFA\\u7279\\u5B9A\\u8868\\u7684MySQL\\u8BED\\u53E5\\nSHOW GRANTS; -- \\u7528\\u6765\\u663E\\u793A\\u6388\\u4E88\\u7528\\u6237\\uFF08\\u6240\\u6709\\u7528\\u6237\\u6216\\u7279\\u5B9A\\u7528\\u6237\\uFF09\\u7684\\u5B89\\u5168\\u6743\\u9650\\nSHOW ERRORS; -- \\u9519\\u8BEF\\u4FE1\\u606F\\nSHOW WARNINGS; -- \\u8B66\\u544A\\u6D88\\u606F\\n\\nHELP SHOW;\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT staff_id FROM staff;\\nSELECT staff_id, wage FROM staff;\\nSELECT * FROM staff;\\nSELECT DISTINCT staff_id FROM staff; -- \\u53BB\\u91CD\\nSELECT * FROM staff LIMIT 5; -- \\u8FD4\\u56DE\\u4E0D\\u8D85\\u8FC7 5 \\u884C\\nSELECT * FROM staff LIMIT 5, 5; -- \\u4E0B\\u4E00\\u4E2A 5 \\u884C\\uFF0CLIMIT 5 OFFSET 5\\nSELECT staff.staff_id FROM klass.staff;\\nSELECT city FROM warehouses ORDER BY city; -- city \\u7684\\u5B57\\u6BCD\\u987A\\u5E8F\\nSELECT * FROM warehouses ORDER BY size, city; -- \\u5148\\u6309 size \\u6392\\u5E8F\\uFF0C\\u518D\\u6309 city \\u6392\\u5E8F\\nSELECT * FROM warehouses ORDER BY size DESC, city ASC; -- DESC \\u964D\\u5E8F\\nSELECT * FROM warehosues WHERE size <> 570;\\nSELECT * FROM warehosues WHERE size BETWEEN 500 AND 600;\\nSELECT * FROM order_form WHERE vendor_id IS NOT NULL; -- IS NULL\\nSELECT * FROM staff WHERE warehouse_id = 'WH2' AND wage > 1230; -- AND \\u4E0E OR \\u4E2D\\uFF0CAND \\u4F18\\u5148\\u7EA7\\u66F4\\u9AD8\\uFF0C\\u662F\\u7528\\u62EC\\u53F7\\u907F\\u514D\\u9519\\u8BEF\\nSELECT * FROM staff WHERE warehouse_id = 'WH2' OR warehouse_id = 'WH1'; -- \\u4E0E\\u4F7F\\u7528 IN \\u76F8\\u540C\\nSELECT * FROM staff WHERE warehouse_id IN ('WH2', 'WH1'); -- IN \\u53EF\\u914D\\u5408 SELECT \\u5B50\\u53E5\\nSELECT * FROM staff WHERE warehouse_id NOT IN ('WH2', 'WH1');\\nSELECT * FROM vendor WHERE vendor_name LIKE '_\\u901A%\\u516C\\u53F8';-- \\u201C_\\u201D\\u5339\\u914D\\u4E00\\u4E2A\\uFF0C\\u201C%\\u201D\\u5339\\u914D\\u96F6\\u5230\\u591A\\u4E2A\\uFF0C\\u901A\\u914D\\u7B26\\u6709\\u6027\\u80FD\\u95EE\\u9898\\uFF0C\\u5FC5\\u8981\\u65F6\\u4F7F\\u7528\\nSELECT 'hello' REGEXP '[0-9]'; -- \\u53EF\\u4F7F\\u7528\\u6B63\\u5219\\uFF0C\\u8F6C\\u8BD1\\u7528 \\u201C\\\\\\\\\\u201D\\nSELECT Concat(warehouse_id, ': ', Trim(city)) AS warehouse_title FROM warehouses; -- \\u62FC\\u63A5\\u5B57\\u6BB5\\uFF0C\\u5927\\u591A\\u6570 SQL \\u4F7F\\u7528 + \\u6216 ||\\uFF0CMySQL \\u4F7F\\u7528 Concat\\uFF0CAS \\u7528\\u4F5C\\u522B\\u540D\\nSELECT prod_id, quantity, item_price, item_price * quantity AS expanded_price FROM orderitems WHERE order_num = 20005; -- \\u7B97\\u6570\\u8BA1\\u7B97\\u5B57\\u6BB5\\n\\n-- \\u51FD\\u6570\\u4E0D\\u5177\\u6709\\u53EF\\u79FB\\u690D\\u6027\\uFF0C\\u5404\\u4E2A SQL \\u7684\\u63D0\\u4F9B\\u4E0D\\u4E00\\u6837\\n-- \\u6587\\u672C\\u5904\\u7406\\u51FD\\u6570\\u3001\\u65F6\\u95F4\\u5904\\u7406\\u51FD\\u6570\\u3001\\u6570\\u503C\\u5904\\u7406\\u51FD\\u6570\\nSELECT * FROM warehouses WHERE Lower(warehouse_id) = 'wh1';\\nSELECT * FROM order_form WHERE Month(`date`) = '06';\\nSELECT * FROM warehouses WHERE Mod(size, 100) = 0;\\n-- \\u805A\\u96C6\\u51FD\\u6570\\nSELECT AVG(wage) FROM staff;\\nSELECT AVG(DISTINCT wage) FROM staff; -- DISTINCT \\u805A\\u96C6\\u4E0D\\u540C\\u503C\\n\\n-- \\u5206\\u7EC4\\n-- WHERE \\u4E4B\\u540E ORDER BY \\u4E4B\\u524D\\n-- WHERE \\u8FC7\\u6EE4\\u884C HAVING \\u8FC7\\u6EE4\\u5206\\u7EC4\\n-- WITH ROLLUP \\u83B7\\u5F97\\u6BCF\\u4E2A\\u5206\\u7EC4\\u4EE5\\u53CA\\u6BCF\\u4E2A\\u5206\\u7EC4\\u6C47\\u603B\\u7EA7\\u522B\\uFF08\\u9488\\u5BF9\\u6BCF\\u4E2A\\u5206\\u7EC4\\uFF09\\u7684\\u503C\\nSELECT vend_id, COUNT(*) AS prod_num FROM products WHERE prod_price >= 10 GROUP BY vend_id HAVING COUNT(*) >= 2;\\n\\n-- \\u5B50\\u67E5\\u8BE2\\nSELECT cust_name, cust_state, (SELECT COUNT(*) FROM orders WHERE orders.cust_id = customers.cust_id) AS orders FROM customers ORDER BY cust_name;\\n\")), mdx(\"p\", null, \"\\u5916\\u952E\\uFF1A\\u5916\\u952E\\u4E3A\\u67D0\\u4E2A\\u8868\\u4E2D\\u7684\\u4E00\\u5217\\uFF0C\\u5B83\\u5305\\u542B\\u53E6\\u4E00\\u4E2A\\u8868\\u7684\\u4E3B\\u952E\\u503C\\uFF0C\\u5B9A\\u4E49\\u4E86\\u4E24\\u4E2A\\u8868\\u4E4B\\u95F4\\u7684\\u5173\\u7CFB\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4FE1\\u606F\\u4E0D\\u91CD\\u590D\\uFF0C\\u4ECE\\u800C\\u4E0D\\u6D6A\\u8D39\\u65F6\\u95F4\\u548C\\u7A7A\\u95F4\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5982\\u679C\\u4FE1\\u606F\\u53D8\\u52A8\\uFF0C\\u53EF\\u4EE5\\u53EA\\u66F4\\u65B0\\u8868\\u4E2D\\u7684\\u5355\\u4E2A\\u8BB0\\u5F55\\uFF0C\\u76F8\\u5173\\u8868\\u4E2D\\u7684\\u6570\\u636E\\u4E0D\\u7528\\u6539\\u52A8\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u7531\\u4E8E\\u6570\\u636E\\u65E0\\u91CD\\u590D\\uFF0C\\u663E\\u7136\\u6570\\u636E\\u662F\\u4E00\\u81F4\\u7684\\uFF0C\\u8FD9\\u4F7F\\u5F97\\u5904\\u7406\\u6570\\u636E\\u66F4\\u7B80\\u5355\"))), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"-- \\u8054\\u7ED3\\u6027\\u80FD\\u6D88\\u8017\\u5927\\nSELECT * FROM staff, warehouses; -- \\u7B1B\\u5361\\u5C14\\u79EF\\nSELECT * FROM staff, warehouses WHERE staff.warehouse_id = warehouses.warehouse_id;\\nSELECT * FROM staff INNER JOIN warehouses ON staff.warehouse_id = warehouses.warehouse_id; -- ANSI SQL \\u9996\\u9009\\uFF0C\\u4F46\\u6027\\u80FD\\u4E0D\\u5982\\u4E0A\\u4E00\\u6761\\u597D\\uFF08\\u5FFD\\u7565\\u5F15\\u64CE\\u4F18\\u5316\\uFF09\\n\")), mdx(\"p\", null, \"\\u5047\\u5982\\u4F60\\u53D1\\u73B0\\u67D0\\u7269\\u54C1(\\u5176ID\\u4E3ADTNTR)\\u5B58\\u5728\\u95EE\\u9898\\uFF0C\\u56E0\\u6B64\\u60F3\\u77E5\\u9053\\u751F\\u4EA7\\u8BE5\\u7269\\u54C1\\u7684\\u4F9B\\u5E94\\u5546\\u751F\\u4EA7\\u7684\\u5176\\u4ED6\\u7269\\u54C1\\u662F\\u5426\\u4E5F\\u5B58\\u5728\\u8FD9\\u4E9B\\u95EE\\u9898\\u3002\\u6B64\\u67E5\\u8BE2\\u8981\\u6C42\\u9996\\u5148\\u627E\\u5230 \\u751F\\u4EA7ID\\u4E3ADTNTR\\u7684\\u7269\\u54C1\\u7684\\u4F9B\\u5E94\\u5546\\uFF0C\\u7136\\u540E\\u627E\\u51FA\\u8FD9\\u4E2A\\u4F9B\\u5E94\\u5546\\u751F\\u4EA7\\u7684\\u5176\\u4ED6\\u7269\\u54C1\\u3002 \\u4E0B\\u9762\\u662F\\u89E3\\u51B3\\u6B64\\u95EE\\u9898\\u7684\\u4E00\\u79CD\\u65B9\\u6CD5:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT prod_id, prod_name\\nFROM products\\nWHERE vend_id IN (SELECT vend_id\\n                  FROM products\\n                  WHERE prod_id = 'DTNTR');\\n\\nSELECT p1.prod_id, p1.prod_name\\nFROM products AS p1, products AS p2\\nWHERE p1.vend_id = p2.vend_id\\n  AND p2.prod_id = 'DTNTR'; -- \\u6027\\u80FD\\u597D\\n\")), mdx(\"p\", null, \"join\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT * FROM staff CROSS JOIN warehouses; -- \\u7B1B\\u5361\\u5C14\\u79EF\\nSELECT * FROM staff NATURAL JOIN warehouses; -- \\u81EA\\u7136\\u8FDE\\u63A5\\nSELECT * FROM staff INNER JOIN warehouses ON staff.warehouse_id = warehouses.warehouse_id;\\nSELECT * FROM staff, warehouses WHERE staff.warehouse_id = warehouses.warehouse_id; -- \\u5185\\u8FDE\\u63A5\\nSELECT * FROM staff LEFT OUTER JOIN warehouses ON staff.warehouse_id = warehouses.warehouse_id; -- \\u5DE6\\u5916\\u8FDE\\u63A5\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"600px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"78.75000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAADHElEQVQozz2SS0vjUBTHD74W8wmEwY0fQFDEhYKbghtRdCsiokv34mJQB8GFO10ICuoH0NF5+JyKjtJp7cPaxmrfam3TWqlJk94maW+SO8dmZkISknvP/55zfucPOmOvwWAhmZQ1TSmXGWOqqgaDQa/XK0mS3+93u90cx8ViMdyilJbKZZmQV45TZRluZ2ftALsfPqSOjwmlCsEX9Xg8drud53mn03l9fR0KhcLhsGmagiAQWbb39e0DXPX2wn5j49f6+jOA88FBidKiILB/F0bj8/eDsZIkVRgL7+ycAuzV1x82NIBraOgEfwDia2sKY3KxaEXrlGqVimGaiqJY4oqmyVhzOv2zpeUbJmtuBvL2djk351hdTaZSoiCYhoFx1UpFVpSXSMS7vExUtVg7Ea+iKIYTCc/BgXN6OutwgGEY0WIxkc/HIhFMYgXJokgYC87MHAMkLy4UXSelEq6XFcXv80UfHtKaRhkD+fnZOzXl39rKFgqyhF1TS4zHhObnUZxyucqUlgl5X5ek10Ih7PW6xsdT29vwq6sLI7IeT5EQbBi3rZFIhGSiUf/m5v+ycYQlWcYASVGcw8NHALDf1HT08WPVNLPZLAbhloUnn887nM5QLBaNRKxyCCHYVy6TwR//p08/UBxdXbU3NFyvrIiaJr69KbXyELemqjmez6XTkihaIJAOEkWHxDnO3trqGRgA1TBufL5btzuVSuEwMCk1TSSu1/L/HRvehmHWaAcCgejdXSYep4YBiJG7vQ3d3z89Pmq6HllcdNhsZyMjVzZb9vwcXXEzMXE1OelbWvLabAmHI3h/fxcKPaWRtwa6rmOriEplLLm3dwjwva7upK5uB+Cyo4NbWNgFSKyvSzyPRnJ0d4vITVEwZbVaBauZiopa9rS7e1wTn1ritrbg589f0HwbG3I+j67C0fCCgBSsyb2LX15eAjc3aJJMLueamjprb7f39//u7MwcHlax7NFR19iYZ3HR3dOTuLzkwmEuEEgmk4VC4V1cKpVyuRyfyYg1b2g1NjgPqutoKdRb/HARq8WG4/E40sWe/wC1yvv5q+5GHgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"join\",\n    \"title\": \"join\",\n    \"src\": \"/static/26356b400ca9075ac90491edd6623eae/ff59c/join.png\",\n    \"srcSet\": [\"/static/26356b400ca9075ac90491edd6623eae/5243c/join.png 240w\", \"/static/26356b400ca9075ac90491edd6623eae/ab158/join.png 480w\", \"/static/26356b400ca9075ac90491edd6623eae/ff59c/join.png 600w\"],\n    \"sizes\": \"(max-width: 600px) 100vw, 600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"\\u7EC4\\u5408\\u67E5\\u8BE2\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"SELECT * FROM staff WHERE warehouse_id = 'WH2' OR wage >= 1230;\\n\\nSELECT * FROM staff WHERE warehouse_id = 'WH2'\\nUNION -- \\u4E0D\\u5305\\u542B\\u91CD\\u590D\\u7684\\u5217\\nSELECT * FROM staff WHERE wage >= 1230;\\n\\nSELECT * FROM staff WHERE warehouse_id = 'WH2'\\nUNION ALL -- \\u5305\\u542B\\u91CD\\u590D\\u7684\\u5217\\nSELECT * FROM staff WHERE wage >= 1230;\\n\\nSELECT * FROM staff WHERE warehouse_id = 'WH2'\\nUNION\\nSELECT * FROM staff WHERE wage >= 1230 ORDER BY wage; -- \\u662F\\u6700\\u540E\\u4E00\\u4E2A\\u7684\\u7EC4\\u6210\\u90E8\\u5206\\uFF0C\\u53CD\\u5BF9\\u6240\\u6709\\u7684\\u7ED3\\u679C\\u90FD\\u6709\\u6548\\n\")), mdx(\"p\", null, \"\\u63D2\\u5165\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"INSERT INTO customers(\\n  cust_name,\\n  cust_address,\\n  cust_city,\\n  cust_state,\\n  cust_country)\\nVALUES (\\n  'ahab',\\n  NULL,\\n  'hb',\\n  'study',\\n  'cn'), (\\n  'lj',\\n  NULL,\\n  'cd',\\n  'study',\\n  'cn'); -- \\u4E0D\\u4F9D\\u8D56\\u8868\\u4E2D\\u5217\\u7684\\u6B21\\u5E8F\\n\\nINSERT INTO customers(\\n  cust_id,\\n  cust_name)\\nSELECT cust_id, cust_name\\nFROM cust_new; -- \\u6839\\u636E\\u5217\\u7684\\u6B21\\u5E8F\\u8FDB\\u884C\\u63D2\\u5165\\n\")), mdx(\"p\", null, \"\\u66F4\\u65B0\\u5220\\u9664\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"UPDATE customers\\nSET cust_email = NULL\\nWHERE cust_name = 'ahab';\\n\\nDELETE FROM customers\\nWHERE cust_id = 123;\\n-- \\u4F7F\\u7528 WHERE\\uFF0C\\u9664\\u975E\\u8981\\u66F4\\u65B0\\u5220\\u9664\\u6BCF\\u4E00\\u884C\\n\")), mdx(\"p\", null, \"\\u521B\\u5EFA\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"CREATE TABLE IF NOT EXISTS customers ( -- \\u521B\\u5EFA\\u65B0\\u8868\\u65F6\\uFF0C\\u8868\\u540D\\u5FC5\\u987B\\u4E0D\\u5B58\\u5728\\uFF0CIF NOT EXISTS \\u53EA\\u68C0\\u6D4B\\u8868\\u540D\\u4E0D\\u68C0\\u6D4B\\u6A21\\u5F0F\\n  cust_id int NOT NULL AUTO_INCREMENT, -- \\u6BCF\\u4E2A\\u8868\\u53EA\\u5141\\u8BB8\\u4E00\\u4E2A AUTO_INCREMENT \\u5217\\uFF0C\\u4E14\\u5FC5\\u987B\\u88AB\\u7D22\\u5F15\\uFF0C\\u4F7F\\u7528 SELECT last_insert_id() \\u786E\\u5B9A\\u6700\\u540E\\u4E00\\u4E2A AUTO_INCREMENT \\u503C\\n  cust_name char(50) NOT NULL,\\n  cust_address char(50) NULL DEFAULT 'cn',\\n  PRIMARY KEY (cust_id)) ENGINE = InnoDB; -- InnoDB \\u652F\\u6301\\u4E8B\\u52A1\\u5904\\u7406\\uFF0CMEMORY \\u529F\\u80FD\\u540C MyISAM \\u4F46\\u6570\\u636E\\u5B58\\u5728\\u5185\\u5B58\\uFF0C\\u901F\\u5EA6\\u6781\\u5FEB\\uFF0C\\u9002\\u5408\\u521B\\u5EFA\\u4E34\\u65F6\\u8868\\uFF0CMyISAM \\u6027\\u80FD\\u6781\\u9AD8\\uFF0C\\u652F\\u6301\\u5168\\u6587\\u672C\\u641C\\u7D22\\uFF0C\\u4F46\\u4E0D\\u652F\\u6301\\u4E8B\\u52A1\\u5904\\u7406\\n\")), mdx(\"p\", null, \"\\u66F4\\u65B0\\u8868\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"ALTER TABLE customers\\nADD cust_phone char(50);\\n\\nALTER TABLE customers\\nDROP cust_phone char(50);\\n\\nALTER TABLE customers\\nADD CONSTRAINT fk_customers_school\\nFOREIGN KEY (cust_school_id) REFERENCES school (school_id),\\nADD CONSTRAINT fk_customers_city\\nFOREIGN KEY (cust_city_id) REFERENCES home (city_id);\\n\")), mdx(\"p\", null, \"\\u5220\\u9664\\u8868\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"DROP TABLE customers;\\n\")), mdx(\"p\", null, \"\\u91CD\\u547D\\u540D\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"RENAME TABLE\\n  backup_customers TO customers,\\n  backup_vendor TO vendor;\\n\")), mdx(\"p\", null, \"\\u89C6\\u56FE\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u91CD\\u7528SQL\\u8BED\\u53E5\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u7B80\\u5316\\u590D\\u6742\\u7684SQL\\u64CD\\u4F5C\\u3002\\u5728\\u7F16\\u5199\\u67E5\\u8BE2\\u540E\\uFF0C\\u53EF\\u4EE5\\u65B9\\u4FBF\\u5730\\u91CD\\u7528\\u5B83\\u800C\\u4E0D\\u5FC5\\u77E5\\u9053\\u5B83\\u7684\\u57FA\\u672C\\u67E5\\u8BE2\\u7EC6\\u8282\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4F7F\\u7528\\u8868\\u7684\\u7EC4\\u6210\\u90E8\\u5206\\u800C\\u4E0D\\u662F\\u6574\\u4E2A\\u8868\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4FDD\\u62A4\\u6570\\u636E\\u3002\\u53EF\\u4EE5\\u7ED9\\u7528\\u6237\\u6388\\u4E88\\u8868\\u7684\\u7279\\u5B9A\\u90E8\\u5206\\u7684\\u8BBF\\u95EE\\u6743\\u9650\\u800C\\u4E0D\\u662F\\u6574\\u4E2A\\u8868\\u7684\\u8BBF\\u95EE\\u6743\\u9650\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u66F4\\u6539\\u6570\\u636E\\u683C\\u5F0F\\u548C\\u8868\\u793A\\u3002\\u89C6\\u56FE\\u53EF\\u8FD4\\u56DE\\u4E0E\\u5E95\\u5C42\\u8868\\u7684\\u8868\\u793A\\u548C\\u683C\\u5F0F\\u4E0D\\u540C\\u7684\\u6570\\u636E\\u3002\"))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u56E0\\u4E3A\\u89C6\\u56FE\\u4E0D\\u5305\\u542B\\u6570\\u636E\\uFF0C\\u6240\\u4EE5\\u6BCF\\u6B21\\u4F7F\\u7528\\u89C6\\u56FE\\u65F6\\uFF0C\\u90FD \\u5FC5\\u987B\\u5904\\u7406\\u67E5\\u8BE2\\u6267\\u884C\\u65F6\\u6240\\u9700\\u7684\\u4EFB\\u4E00\\u4E2A\\u68C0\\u7D22\\u3002\\u5982\\u679C\\u4F60\\u7528\\u591A\\u4E2A\\u8054\\u7ED3 \\u548C\\u8FC7\\u6EE4\\u521B\\u5EFA\\u4E86\\u590D\\u6742\\u7684\\u89C6\\u56FE\\u6216\\u8005\\u5D4C\\u5957\\u4E86\\u89C6\\u56FE\\uFF0C\\u53EF\\u80FD\\u4F1A\\u53D1\\u73B0\\u6027\\u80FD \\u4E0B\\u964D\\u5F97\\u5F88\\u5389\\u5BB3\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"ORDER BY\\u53EF\\u4EE5\\u7528\\u5728\\u89C6\\u56FE\\u4E2D\\uFF0C\\u4F46\\u5982\\u679C\\u4ECE\\u8BE5\\u89C6\\u56FE\\u68C0\\u7D22\\u6570\\u636ESELECT\\u4E2D\\u4E5F\\u542B\\u6709ORDER BY\\uFF0C\\u90A3\\u4E48\\u8BE5\\u89C6\\u56FE\\u4E2D\\u7684ORDER BY\\u5C06\\u88AB\\u8986\\u76D6\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u89C6\\u56FE\\u4E0D\\u80FD\\u7D22\\u5F15\\uFF0C\\u4E5F\\u4E0D\\u80FD\\u6709\\u5173\\u8054\\u7684\\u89E6\\u53D1\\u5668\\u6216\\u9ED8\\u8BA4\\u503C\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u89C6\\u56FE\\u53EF\\u4EE5\\u548C\\u8868\\u4E00\\u8D77\\u4F7F\\u7528\\u3002\\u4F8B\\u5982\\uFF0C\\u7F16\\u5199\\u4E00\\u6761\\u8054\\u7ED3\\u8868\\u548C\\u89C6\\u56FE\\u7684SELECT\\u8BED\\u53E5\\u3002\"))), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"CREATE VIEW <viewname>\\nDROP VIEW <viewname>\\nCREATE OR REPLACE VIEW <viewname>\\n\\nCREATE VIEW orderitemsexpanded AS\\nSELECT order_num,\\n  prod_id,\\n  item_price,\\n  quantity,\\n  quantity * item_price AS expanded_price\\nFROM orderitems;\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u4E00\\u822C\\uFF0C\\u5E94\\u8BE5\\u5C06\\u89C6\\u56FE\\u7528\\u4E8E\\u68C0\\u7D22(SELECT\\u8BED\\u53E5) \\u800C\\u4E0D\\u7528\\u4E8E\\u66F4\\u65B0(INSERT\\u3001UPDATE\\u548CDELETE)\\u3002\")), mdx(\"p\", null, \"\\u5B58\\u50A8\\u8FC7\\u7A0B\"), mdx(\"p\", null, \"\\u7B80\\u5355\\u5B89\\u5168\\u9AD8\\u6027\\u80FD\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"DELIMITER // -- \\u4F7F\\u7528 // \\u7ED3\\u675F\\n\\nCREATE PROCEDURE Avg_wage()\\nBEGIN\\n  SELECT Avg(wage)\\n  FROM staff;\\nEND //\\n\\nDELIMITER ; -- \\u6539\\u56DE\\u4F7F\\u7528 ;\\n\\nCALL Avg_wage(); -- \\u8C03\\u7528\\n\\nDROP PROCEDURE IF EXISTS Avg_wage;\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"CREATE PROCEDURE show_sum_of_bigger_than_wage(\\n  IN num INT,\\n  OUT result INT)\\nBEGIN\\n  SELECT Sum(wage) -- \\u7ED3\\u679C\\u53EA\\u80FD\\u6709\\u4E00\\u4E2A\\u6570\\u636E\\n  FROM staff\\n  WHERE wage >= num\\n  INTO result;\\nEND;\\n\\nCALL show_bigger_than_wage(1230, @sum_wages);\\nSELECT @sum_wages;\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"CREATE PROCEDURE ordertotal(\\n  IN onumber INT,\\n  IN taxable BOOLEAN,\\n  OUT ototal DECIMAL(8, 2))\\nCOMMENT 'Obtain order total, optionally adding tax'\\nBEGIN\\n  DECLEAR total DECIMAL(8, 2);\\n  DECLEAR taxrate INT DEFAULT 6;\\n\\n  SELECT Sum(item_price * quantity)\\n  FROM orderitems\\n  WHERE order_num = onumber\\n  INTO total;\\n\\n  IF taxable THEN\\n    SELECT total + (total / 100 * taxrate) INTO total;\\n  END IF;\\n\\n  SELECT total INTO ototal;\\nEND;\\n\\nCALL ordertotal(20005, 0, @total) -- 0 == false, !0 == true\\n\")), mdx(\"p\", null, \"\\u6E38\\u6807\"), mdx(\"p\", null, \"MySQL \\u4E2D\\u53EA\\u80FD\\u7528\\u4E8E\\u5B58\\u50A8\\u8FC7\\u7A0B\\u548C\\u51FD\\u6570\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"CREATE PROCEDURE processorders()\\nBEGIN\\n  DECLEAR done BOOLEAN DEFAULT 0;\\n  DECLEAR o INT;\\n  DECLEAR t DECIMAL(8, 2);\\n\\n  DECLEAR ordernumbers CURSOR\\n  FOR\\n  SELECT order_num FROM orders;\\n\\n  DECLEAR CONTINUE HANDLER FOR SQLSTATE '02000' SET done = 1; -- \\u5F53 order_num \\u4E3A 02000 \\u65F6\\uFF0C\\u8BBE\\u7F6E done = 1\\n\\n  CREATE TABLE IF NOT EXISTS ordertotals(\\n    order_num INT,\\n    total DECIMAL(8, 2));\\n\\n  OPEN ordernumbers;\\n\\n  REPEAT\\n    FETCH ordernumbers INTO o;\\n    CALL ordertotal(o, 1, t);\\n    INSERT INTO ordertotals(order_num, total)\\n    VALUES (o, t);\\n  UNTIL done END REPEAT;\\n\\n  CLOSE ordernumbers;\\nEND;\\n\")), mdx(\"p\", null, \"\\u89E6\\u53D1\\u5668\"), mdx(\"p\", null, \"DELETE\\u3001INSERT\\u3001UPDATE\"), mdx(\"p\", null, \"\\u53EA\\u6709\\u8868\\u652F\\u6301\\uFF0C\\u89C6\\u56FE\\u3001\\u4E34\\u65F6\\u8868\\u90FD\\u4E0D\\u652F\\u6301\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"-- BEFORE \\u7528\\u4E8E\\u6570\\u636E\\u9A8C\\u8BC1\\u4E0E\\u51C0\\u5316\\nCREATE TRIGGER neworder AFTER INSERT ON orders FOR EACH ROW SELECT NEW.order_num -- AUTO_INCRMENT \\u4E4B\\u540E\\u786E\\u5B9A\\u65B0\\u751F\\u6210\\u7684\\u503C\\uFF0CINSERT \\u65F6\\u6709\\u4E00\\u4E2A NEW \\u865A\\u8868\\n\\nCREATE TRIGGER deleteorder BEFORE DELETE ON orders\\nFOR EACH ROW\\nBEGIN\\n  INSERT INTO archive_orders(order_num, order_date, cust_id)\\n  VALUES (OLD.order_num, OLD.order_date, OLD.cust_id); -- DELETE \\u65F6\\u6709\\u4E00\\u4E2A OLD \\u865A\\u8868\\nEND; -- \\u53EF\\u4F7F\\u7528 BEGIN END \\u5B58\\u50A8\\u591A\\u6761\\u8BED\\u53E5\\n\\n-- UPDATE \\u65F6\\u6709 NEW\\u3001OLD \\u865A\\u8868\\n-- \\u6240\\u6709\\u64CD\\u4F5C\\u4E2D\\uFF0CNEW \\u53EF\\u4EE5\\u66F4\\u65B0\\uFF0COLD \\u53EA\\u8BFB\\n\")), mdx(\"p\", null, \"\\u4E8B\\u52A1\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E8B\\u52A1(transaction)\\u6307\\u4E00\\u7EC4SQL\\u8BED\\u53E5;\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u56DE\\u9000(rollback)\\u6307\\u64A4\\u9500\\u6307\\u5B9ASQL\\u8BED\\u53E5\\u7684\\u8FC7\\u7A0B;\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u63D0\\u4EA4(commit)\\u6307\\u5C06\\u672A\\u5B58\\u50A8\\u7684SQL\\u8BED\\u53E5\\u7ED3\\u679C\\u5199\\u5165\\u6570\\u636E\\u5E93\\u8868;\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4FDD\\u7559\\u70B9(savepoint)\\u6307\\u4E8B\\u52A1\\u5904\\u7406\\u4E2D\\u8BBE\\u7F6E\\u7684\\u4E34\\u65F6\\u5360\\u4F4D\\u7B26(place-holder)\\uFF0C\\u4F60\\u53EF\\u4EE5\\u5BF9\\u5B83\\u53D1\\u5E03\\u56DE\\u9000(\\u4E0E\\u56DE\\u9000\\u6574\\u4E2A\\u4E8B\\u52A1\\u5904\\u7406\\u4E0D\\u540C)\\u3002\"))), mdx(\"p\", null, \"\\u53EA\\u80FD\\u56DE\\u9000 UPDATE\\u3001DELETE\\u3001INSERT\\uFF0C\\u4E0D\\u80FD\\u56DE\\u9000 CREATE\\u3001DROP\\u3001SELECT\"), mdx(\"p\", null, \"\\u4E00\\u822C\\u4F7F\\u7528\\u9690\\u5F0F\\u63D0\\u4EA4\\uFF0C\\u4E8B\\u52A1\\u4E2D\\u53EA\\u80FD\\u4F7F\\u7528 COMMIT\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"START TRANSACTION;\\nDELETE FROM orders WHERE order_num = 12000;\\nDELETE FROM orders WHERE order_num = 12000; -- \\u6267\\u884C\\u51FA\\u9519\\uFF0C\\u4E0D\\u4F1A\\u63D0\\u4EA4\\uFF0C\\u64CD\\u4F5C\\u4F1A\\u81EA\\u52A8\\u64A4\\u56DE\\nCOMMIT;\\n\\n-- \\u4FDD\\u7559\\u70B9\\nSAVEPOINT delete1;\\nROLLBACK TO delete1;\\n\")), mdx(\"p\", null, \"\\u5B89\\u5168\\u7BA1\\u7406\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"CREATE USER ben IDENTIFIED BY 'p@$$wOrd';\\nRENAME USER ben TO bufer;\\nDROP USER bufer;\\nSHOW GRANTS FOR ben;\\nGRANTS SELECT ON klass FOR bufer;\\nSET PASSWORD FOR bufer = Password('n3w p@$$wOrd'); -- \\u4E0D\\u7F6E\\u9876 user \\u65F6\\u662F\\u66F4\\u6539\\u81EA\\u5DF1\\u7684\\u5BC6\\u7801\\n\")), mdx(\"p\", null, \"\\u7EF4\\u62A4\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"FLUSH TABLES; -- \\u5237\\u65B0\\uFF0C\\u4FDD\\u8BC1\\u6570\\u636E\\u5199\\u5165\\u78C1\\u76D8\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/note/mysql-must-know"}},"staticQueryHashes":["318001574","3787687951","3787687951"]}