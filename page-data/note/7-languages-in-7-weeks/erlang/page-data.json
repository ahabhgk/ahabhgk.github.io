{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx","path":"/note/7-languages-in-7-weeks/erlang","result":{"data":{"page":{"__typename":"MdxPage","title":"Erlang","slug":"/note/7-languages-in-7-weeks/erlang","excerpt":"无线程，轻量级进程：摆脱了共享资源和性能瓶颈 可靠性：Let it crash、hot reload 可以运行多年不宕机 小写是原子，大写开头是变量 变量不可变，只能被赋值一次 列表与元组 模式匹配 位匹配 函数 case、if 匿名函数 高阶函数 foreach map all…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Erlang\",\n  \"slug\": \"/note/7-languages-in-7-weeks/erlang\",\n  \"date\": \"2020-03-30T00:00:00.000Z\",\n  \"description\": \"《7 周 7 语言》读书笔记\",\n  \"tags\": [\"Note\", \"7 Languages in 7 Weeks\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u65E0\\u7EBF\\u7A0B\\uFF0C\\u8F7B\\u91CF\\u7EA7\\u8FDB\\u7A0B\\uFF1A\\u6446\\u8131\\u4E86\\u5171\\u4EAB\\u8D44\\u6E90\\u548C\\u6027\\u80FD\\u74F6\\u9888\"), mdx(\"p\", null, \"\\u53EF\\u9760\\u6027\\uFF1ALet it crash\\u3001hot reload \\u53EF\\u4EE5\\u8FD0\\u884C\\u591A\\u5E74\\u4E0D\\u5B95\\u673A\"), mdx(\"p\", null, \"\\u5C0F\\u5199\\u662F\\u539F\\u5B50\\uFF0C\\u5927\\u5199\\u5F00\\u5934\\u662F\\u53D8\\u91CF\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"two == two.\\n% true\\nVar = 1.\\n\")), mdx(\"p\", null, \"\\u53D8\\u91CF\\u4E0D\\u53EF\\u53D8\\uFF0C\\u53EA\\u80FD\\u88AB\\u8D4B\\u503C\\u4E00\\u6B21\"), mdx(\"p\", null, \"\\u5217\\u8868\\u4E0E\\u5143\\u7EC4\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"[1, two, \\\"three\\\"].\\n{1, two, \\\"three\\\"}.\\n\")), mdx(\"p\", null, \"\\u6A21\\u5F0F\\u5339\\u914D\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"Person = {ahabhgk, 19}.\\n{Name, Age} = Person.\\n\\n[One, Two | Rest] = [1, 2, 3].\\nOne. % 1\\nTwo. % 2\\nRest. % [3]\\n\")), mdx(\"p\", null, \"\\u4F4D\\u5339\\u914D\"), mdx(\"p\", null, \"\\u51FD\\u6570\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"% basic.erl\\n-module(basic). % \\u6A21\\u5757\\u540D\\n-export([number/1]). % \\u66B4\\u9732\\u51FA\\u7684\\u51FD\\u6570\\uFF0C/1 \\u8868\\u793A\\u6709\\u4E00\\u4E2A\\u53C2\\u6570\\n-export([fib/1]).\\n\\nnumber(one) -> 1;\\nnumber(two) -> 2;\\nnumber(three) -> 3.\\n\\nfib(0) -> 1;\\nfib(1) -> 1;\\nfib(N) -> fib(N - 1) + fib(N - 2).\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"$ erl\\n> c(basic).\\n{ok,basic}\\n> basic:fib(10).\\n89\\n\")), mdx(\"p\", null, \"case\\u3001if\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"Animal = \\\"dog\\\"\\ncase Animal of\\n  \\\"cat\\\" -> thundercat;\\n  \\\"elephant\\\" -> dumbo\\n  _ -> something_else\\nend.\\n\\nX = 0\\nif\\n  X > 0 -> positive;\\n  X < 0 -> negative;\\n  true -> zero\\nend.\\n\")), mdx(\"p\", null, \"\\u533F\\u540D\\u51FD\\u6570\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"Negate = fun(I) -> -I end.\\nNegate(1). % -1\\n\")), mdx(\"p\", null, \"\\u9AD8\\u9636\\u51FD\\u6570\"), mdx(\"p\", null, \"foreach map all any takewith dropwith foldl\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"Numbers = [1, 2, 3, 4].\\nlists:map(fun(Number) -> Number + 1 end, Numbers).\\n\\n% map(F, [Head | Tail]) -> [F(Head) | map(F, Tail)];\\n% map(F, []) -> [].\\n\\nAdder = fun(ListItem, SumSoFor) -> ListItem + SumSoFor end.\\nlists:foldl(Adder, 0, Numbers).\\n\")), mdx(\"p\", null, \"\\u5217\\u8868\\u6784\\u9020\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"[1 | [2, 3]]. % [1, 2, 3]\\n\")), mdx(\"p\", null, \"\\u5217\\u8868\\u89E3\\u6790\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"lists:map(Double, Numbers).\\n% \\u7B49\\u4EF7\\u4E8E\\n[Double(X) || X <- Numbers].\\n% \\u7B49\\u4EF7\\u4E8E\\n[X * 2 || X <- [1, 2, 3, 4]].\\n\\n% map \\u5B9A\\u4E49\\n% map(F, L) -> [F(X) || X <- L].\\n\\n% \\u53EF\\u4EE5\\u6709\\u591A\\u4E2A\\u5B50\\u53E5\\uFF0C\\u5B50\\u53E5\\u53EF\\u4EE5\\u662F filter \\u6216 generator\\uFF08Match <- List\\uFF09\\n[{X, Y} || X <- [1, 2, 3, 4], X < 3, Y <- [5, 6]].\\n% [{1, 5}, {1, 6}, {2, 5}, {2, 6}].\\n\")), mdx(\"h2\", {\n    \"id\": \"并发\"\n  }, \"\\u5E76\\u53D1\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"-module(translate).\\n-export([loop/0]).\\n\\nloop() ->\\n  receive % receive \\u7528\\u6765\\u63A5\\u6536\\u5176\\u4ED6\\u8FDB\\u7A0B\\u53D1\\u8FC7\\u6765\\u7684\\u6D88\\u606F\\n    \\\"casa\\\" ->\\n      io:format(\\\"house~n\\\"),\\n      loop();\\n    \\\"blanca\\\" ->\\n      io:format(\\\"white~n\\\"),\\n      loop();\\n    _ ->\\n      io:format(\\\"I dont understand.~n\\\"),\\n      loop()\\nend.\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"$ erl\\n> c(translate).\\n> Pid = spawn(fun translate:loop/0). % \\u901A\\u8FC7 spawn \\u542F\\u52A8\\u8FDB\\u7A0B\\n# \\u53EF\\u4EE5\\u901A\\u8FC7\\u5176\\u4ED6\\u5F62\\u5F0F\\u5B9A\\u4E49\\uFF0C\\u6BD4\\u5982\\u4E0D\\u7528 Pid \\u800C\\u7528\\u540D\\u5B57\\u6CE8\\u518C\\u8FDB\\u7A0B\\n# \\u8FD8\\u6709\\u652F\\u6301 hot reload \\u7684\\u5F62\\u5F0F\\n# \\u8FDC\\u7A0B\\u8FDB\\u7A0B spawn(Node, function).\\n> Pid ! \\\"casa\\\".\\nhouse\\n\\\"casa\\\"\\n> Pid ! \\\"haa\\\".\\nI dont understand.\\n\\\"haa\\\"\\n# \\u5206\\u5E03\\u5F0F\\u6D88\\u606F\\u53D1\\u9001\\u7ED9\\u547D\\u540D\\u8D44\\u6E90 node@server ! message\\n\")), mdx(\"p\", null, \"\\u540C\\u6B65\\u6D88\\u606F\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"-module(translate_service).\\n-export([loop/0, translate/2]).\\n\\nloop() ->\\n  receive\\n    {From, \\\"casa\\\"} ->\\n      From ! \\\"house\\\",\\n      loop();\\n\\n    {From, \\\"blanca\\\"} ->\\n      From ! \\\"white\\\",\\n      loop();\\n\\n    {From, _} ->\\n      From ! \\\"I do not understand.\\\",\\n      loop()\\n  end.\\n\\ntranslate(To, Word) ->\\n  To ! {self(), Word},\\n  receive\\n    Translation -> Translation\\n  end.\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"> Translator = spawn(fun translate_service:loop/0).\\n> translate_service:translate(Translator, \\\"blanca\\\").\\n\\\"white\\\"\\n> translate_service:translate(Translator, \\\"casa\\\").\\n\\\"house\\\"\\n\")), mdx(\"p\", null, \"\\u94FE\\u63A5\\u8FDB\\u7A0B\\u4EE5\\u83B7\\u5F97\\u53EF\\u9760\\u6027\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"% roulette.erl\\n-module(roulette).\\n-export([loop/0]).\\n\\nloop() ->\\n  receive\\n    3 -> io:format(\\\"bang.~n\\\"), exit({roulette, die, at, erlang:time()});\\n    _ -> io:format(\\\"click~n\\\"), loop()\\n  end.\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-erlang\"\n  }), \"% doctor.erl\\n-module(doctor).\\n-export([loop/0]).\\n\\nloop() ->\\n  process_flag(trap_exit, true),\\n  receive\\n    new ->\\n      io:format(\\\"creating and monitoring process.~n\\\"),\\n      register(revolver, spawn_link(fun roulette:loop/0)),\\n       loop();\\n \\n    {'EXIT', From, Reason} ->\\n      io:format(\\\"the shooter ~p died with reason ~p.\\\", [From, Reason]),\\n      io:format(\\\"restarting.~n\\\"),\\n      self() ! new,\\n      loop()\\n  end.\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"$ erl\\n> c(doctor).\\n> c(roulette).\\n> Doc = spawn(fun doctor:loop/0).\\n<0.86.0>\\n> Doc ! new.\\ncreating and monitoring process.\\n> revolver ! 1.\\nclick\\n1\\n> revolver ! 3.\\nbang.\\n3\\nthe shooter <0.88.0> died with reason {roulette,die,at,{21,43,19}}.restarting.\\ncreating and monitoring process.\\n> revolver ! 4.\\nclick\\n4\\n\")), mdx(\"h2\", {\n    \"id\": \"feeling\"\n  }, \"feeling\"), mdx(\"p\", null, \"\\u52A8\\u6001\"), mdx(\"p\", null, \"\\u53EF\\u9760\\u6027\"), mdx(\"p\", null, \"\\u8F7B\\u91CF\\u7EA7\\u8FDB\\u7A0B\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/note/7-languages-in-7-weeks/erlang"}},"staticQueryHashes":["318001574","3787687951","3787687951"]}